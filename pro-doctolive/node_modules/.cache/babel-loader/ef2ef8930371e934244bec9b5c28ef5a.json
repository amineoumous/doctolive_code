{"ast":null,"code":"var encodePacket = require(\"./encodePacket\");\n\nvar decodePacket = require(\"./decodePacket\");\n\nvar SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nvar encodePayload = function encodePayload(packets, callback) {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  var length = packets.length;\n  var encodedPackets = new Array(length);\n  var count = 0;\n  packets.forEach(function (packet, i) {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, function (encodedPacket) {\n      encodedPackets[i] = encodedPacket;\n\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nvar decodePayload = function decodePayload(encodedPayload, binaryType) {\n  var encodedPackets = encodedPayload.split(SEPARATOR);\n  var packets = [];\n\n  for (var i = 0; i < encodedPackets.length; i++) {\n    var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket: encodePacket,\n  encodePayload: encodePayload,\n  decodePacket: decodePacket,\n  decodePayload: decodePayload\n};","map":{"version":3,"names":["encodePacket","require","decodePacket","SEPARATOR","String","fromCharCode","encodePayload","packets","callback","length","encodedPackets","Array","count","forEach","packet","i","encodedPacket","join","decodePayload","encodedPayload","binaryType","split","decodedPacket","push","type","module","exports","protocol"],"sources":["C:/app/doctolive_code/pro-doctolive/node_modules/engine.io-parser/lib/index.js"],"sourcesContent":["const encodePacket = require(\"./encodePacket\");\r\nconst decodePacket = require(\"./decodePacket\");\r\n\r\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\r\n\r\nconst encodePayload = (packets, callback) => {\r\n  // some packets may be added to the array while encoding, so the initial length must be saved\r\n  const length = packets.length;\r\n  const encodedPackets = new Array(length);\r\n  let count = 0;\r\n\r\n  packets.forEach((packet, i) => {\r\n    // force base64 encoding for binary packets\r\n    encodePacket(packet, false, encodedPacket => {\r\n      encodedPackets[i] = encodedPacket;\r\n      if (++count === length) {\r\n        callback(encodedPackets.join(SEPARATOR));\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst decodePayload = (encodedPayload, binaryType) => {\r\n  const encodedPackets = encodedPayload.split(SEPARATOR);\r\n  const packets = [];\r\n  for (let i = 0; i < encodedPackets.length; i++) {\r\n    const decodedPacket = decodePacket(encodedPackets[i], binaryType);\r\n    packets.push(decodedPacket);\r\n    if (decodedPacket.type === \"error\") {\r\n      break;\r\n    }\r\n  }\r\n  return packets;\r\n};\r\n\r\nmodule.exports = {\r\n  protocol: 4,\r\n  encodePacket,\r\n  encodePayload,\r\n  decodePacket,\r\n  decodePayload\r\n};\r\n"],"mappings":"AAAA,IAAMA,YAAY,GAAGC,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,gBAAD,CAA5B;;AAEA,IAAME,SAAS,GAAGC,MAAM,CAACC,YAAP,CAAoB,EAApB,CAAlB,C,CAA2C;;AAE3C,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAUC,QAAV,EAAuB;EAC3C;EACA,IAAMC,MAAM,GAAGF,OAAO,CAACE,MAAvB;EACA,IAAMC,cAAc,GAAG,IAAIC,KAAJ,CAAUF,MAAV,CAAvB;EACA,IAAIG,KAAK,GAAG,CAAZ;EAEAL,OAAO,CAACM,OAAR,CAAgB,UAACC,MAAD,EAASC,CAAT,EAAe;IAC7B;IACAf,YAAY,CAACc,MAAD,EAAS,KAAT,EAAgB,UAAAE,aAAa,EAAI;MAC3CN,cAAc,CAACK,CAAD,CAAd,GAAoBC,aAApB;;MACA,IAAI,EAAEJ,KAAF,KAAYH,MAAhB,EAAwB;QACtBD,QAAQ,CAACE,cAAc,CAACO,IAAf,CAAoBd,SAApB,CAAD,CAAR;MACD;IACF,CALW,CAAZ;EAMD,CARD;AASD,CAfD;;AAiBA,IAAMe,aAAa,GAAG,SAAhBA,aAAgB,CAACC,cAAD,EAAiBC,UAAjB,EAAgC;EACpD,IAAMV,cAAc,GAAGS,cAAc,CAACE,KAAf,CAAqBlB,SAArB,CAAvB;EACA,IAAMI,OAAO,GAAG,EAAhB;;EACA,KAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,cAAc,CAACD,MAAnC,EAA2CM,CAAC,EAA5C,EAAgD;IAC9C,IAAMO,aAAa,GAAGpB,YAAY,CAACQ,cAAc,CAACK,CAAD,CAAf,EAAoBK,UAApB,CAAlC;IACAb,OAAO,CAACgB,IAAR,CAAaD,aAAb;;IACA,IAAIA,aAAa,CAACE,IAAd,KAAuB,OAA3B,EAAoC;MAClC;IACD;EACF;;EACD,OAAOjB,OAAP;AACD,CAXD;;AAaAkB,MAAM,CAACC,OAAP,GAAiB;EACfC,QAAQ,EAAE,CADK;EAEf3B,YAAY,EAAZA,YAFe;EAGfM,aAAa,EAAbA,aAHe;EAIfJ,YAAY,EAAZA,YAJe;EAKfgB,aAAa,EAAbA;AALe,CAAjB"},"metadata":{},"sourceType":"script"}