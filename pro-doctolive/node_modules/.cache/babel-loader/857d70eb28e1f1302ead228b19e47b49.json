{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\pro-doctolive\\\\src\\\\layouts\\\\Layout.js\";\nimport React, { useEffect, useState } from 'react';\nimport MedecinPro from './MedecinPro';\nimport Consultation from './Consultation';\nimport { Switch, Route } from \"react-router-dom\";\nimport BaseUrl from 'Config.js';\nimport io from \"socket.io-client\";\nimport 'assets/css/pro.css';\nimport { useAuth } from 'context/Auth';\nexport default function Layout(props) {\n  var _this = this;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      socket = _useState2[0],\n      setSocket = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      socketError = _useState4[0],\n      setSocketError = _useState4[1];\n\n  var _useAuth = useAuth(),\n      UserData = _useAuth.UserData;\n\n  useEffect(function () {\n    var options = {\n      path: \"/socket.io\",\n      reconnection: true,\n      reconnectionAttempts: Infinity,\n      transports: ['websocket']\n    };\n    var connection = io.connect(BaseUrl.BACKEND_URL, options);\n    connection.on('connect', function () {\n      console.log('connect');\n      connection.emit('join-medecin', _objectSpread(_objectSpread({}, UserData.user), {}, {\n        id: 'm' + UserData.user.id\n      }), function (_ref) {\n        var error = _ref.error,\n            message = _ref.message;\n        console.log(error, message);\n\n        if (error) {\n          setSocketError(error, message);\n        } else {}\n      });\n    });\n    connection.on('connect_error', function (error) {\n      console.log('connect_error', error);\n    });\n    connection.on('disconnect', function (reason) {\n      console.log('disconnect', reason);\n    });\n    connection.on('reconnect_attempt', function () {\n      console.log('reconnect_attempt');\n    });\n    connection.on('reconnecting', function () {\n      console.log('reconnecting');\n    });\n    connection.on('reconnect', function () {\n      console.log('reconnect');\n    });\n    setSocket(connection);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/chat-video\",\n    render: function render(pr) {\n      return /*#__PURE__*/React.createElement(Consultation, Object.assign({}, pr, {\n        socket: socket,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 38\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    render: function render(pr) {\n      return /*#__PURE__*/React.createElement(MedecinPro, Object.assign({}, pr, {\n        socket: socket,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 34\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"names":["React","useEffect","useState","MedecinPro","Consultation","Switch","Route","BaseUrl","io","useAuth","Layout","props","socket","setSocket","socketError","setSocketError","UserData","options","path","reconnection","reconnectionAttempts","Infinity","transports","connection","connect","BACKEND_URL","on","console","log","emit","user","id","error","message","reason","pr"],"sources":["C:/Users/CARRE/Documents/GitHub/doctolive_code/pro-doctolive/src/layouts/Layout.js"],"sourcesContent":["import React,{useEffect, useState} from 'react'\r\n\r\nimport MedecinPro from './MedecinPro'\r\nimport Consultation from './Consultation'\r\n\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nimport BaseUrl from 'Config.js'\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nimport 'assets/css/pro.css'\r\nimport { useAuth } from 'context/Auth';\r\n\r\n\r\nexport default function Layout(props) {\r\n    const [socket, setSocket] = useState();\r\n    const [socketError, setSocketError] = useState({})\r\n\r\n    const {UserData} = useAuth();   \r\n\r\n    useEffect(() => {\r\n       \r\n        const options = {\r\n            path:\"/socket.io\",\r\n            reconnection: true,\r\n            reconnectionAttempts: Infinity,\r\n            transports: ['websocket']\r\n        }\r\n        \r\n        let connection = io.connect(BaseUrl.BACKEND_URL, options);\r\n        connection.on('connect', () => {\r\n          console.log('connect');\r\n\r\n          connection.emit('join-medecin',  {...UserData.user, id: 'm' + UserData.user.id } , ({error, message }) => {\r\n            console.log(error, message);\r\n            if(error) {\r\n                setSocketError(error, message)\r\n            }\r\n            else{\r\n            \r\n            }\r\n        });\r\n        });\r\n    \r\n        connection.on('connect_error', (error) => {\r\n            console.log('connect_error', error)\r\n        }); \r\n\r\n        connection.on('disconnect', (reason) => {\r\n            console.log('disconnect', reason)\r\n\r\n        });\r\n      \r\n\r\n        connection.on('reconnect_attempt', () => {\r\n            console.log('reconnect_attempt')\r\n\r\n        });\r\n\r\n        connection.on('reconnecting', () => {\r\n            console.log('reconnecting')\r\n\r\n        });\r\n        connection.on('reconnect', () => {\r\n            console.log('reconnect')\r\n\r\n           \r\n        });\r\n\r\n      \r\n\r\n        setSocket(connection)\r\n    }, [] );\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route\r\n                    path=\"/chat-video\"\r\n                    render= {(pr) => <Consultation {...pr} socket={socket} /> }\r\n                />\r\n                <Route\r\n                path=\"/\"\r\n                render= {(pr) => <MedecinPro {...pr} socket={socket} /> }\r\n                />\r\n            </Switch> \r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}