{"ast":null,"code":"import _objectSpread from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import MedecinPro from'./MedecinPro';import Consultation from'./Consultation';import{Switch,Route}from\"react-router-dom\";import BaseUrl from'Config.js';import io from\"socket.io-client\";import'assets/css/pro.css';import{useAuth}from'context/Auth';export default function Layout(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),socket=_useState2[0],setSocket=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),socketError=_useState4[0],setSocketError=_useState4[1];var _useAuth=useAuth(),UserData=_useAuth.UserData;useEffect(function(){var options={path:\"/socket.io\",reconnection:true,reconnectionAttempts:Infinity,transports:['websocket']};var connection=io.connect(BaseUrl.BACKEND_URL,options);connection.on('connect',function(){console.log('connect');connection.emit('join-medecin',_objectSpread(_objectSpread({},UserData.user),{},{id:'m'+UserData.user.id}),function(_ref){var error=_ref.error,message=_ref.message;console.log(error,message);if(error){setSocketError(error,message);}else{}});});connection.on('connect_error',function(error){console.log('connect_error',error);});connection.on('disconnect',function(reason){console.log('disconnect',reason);});connection.on('reconnect_attempt',function(){console.log('reconnect_attempt');});connection.on('reconnecting',function(){console.log('reconnecting');});connection.on('reconnect',function(){console.log('reconnect');});setSocket(connection);},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/chat-video\",render:function render(pr){return/*#__PURE__*/React.createElement(Consultation,Object.assign({},pr,{socket:socket}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/\",render:function render(pr){return/*#__PURE__*/React.createElement(MedecinPro,Object.assign({},pr,{socket:socket}));}})));}","map":{"version":3,"names":["React","useEffect","useState","MedecinPro","Consultation","Switch","Route","BaseUrl","io","useAuth","Layout","props","socket","setSocket","socketError","setSocketError","UserData","options","path","reconnection","reconnectionAttempts","Infinity","transports","connection","connect","BACKEND_URL","on","console","log","emit","user","id","error","message","reason","pr"],"sources":["C:/app/doctolive_code/pro-doctolive/src/layouts/Layout.js"],"sourcesContent":["import React,{useEffect, useState} from 'react'\r\n\r\nimport MedecinPro from './MedecinPro'\r\nimport Consultation from './Consultation'\r\n\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nimport BaseUrl from 'Config.js'\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nimport 'assets/css/pro.css'\r\nimport { useAuth } from 'context/Auth';\r\n\r\n\r\nexport default function Layout(props) {\r\n    const [socket, setSocket] = useState();\r\n    const [socketError, setSocketError] = useState({})\r\n\r\n    const {UserData} = useAuth();   \r\n\r\n    useEffect(() => {\r\n       \r\n        const options = {\r\n            path:\"/socket.io\",\r\n            reconnection: true,\r\n            reconnectionAttempts: Infinity,\r\n            transports: ['websocket']\r\n        }\r\n        \r\n        let connection = io.connect(BaseUrl.BACKEND_URL, options);\r\n        connection.on('connect', () => {\r\n          console.log('connect');\r\n\r\n          connection.emit('join-medecin',  {...UserData.user, id: 'm' + UserData.user.id } , ({error, message }) => {\r\n            console.log(error, message);\r\n            if(error) {\r\n                setSocketError(error, message)\r\n            }\r\n            else{\r\n            \r\n            }\r\n        });\r\n        });\r\n    \r\n        connection.on('connect_error', (error) => {\r\n            console.log('connect_error', error)\r\n        }); \r\n\r\n        connection.on('disconnect', (reason) => {\r\n            console.log('disconnect', reason)\r\n\r\n        });\r\n      \r\n\r\n        connection.on('reconnect_attempt', () => {\r\n            console.log('reconnect_attempt')\r\n\r\n        });\r\n\r\n        connection.on('reconnecting', () => {\r\n            console.log('reconnecting')\r\n\r\n        });\r\n        connection.on('reconnect', () => {\r\n            console.log('reconnect')\r\n\r\n           \r\n        });\r\n\r\n      \r\n\r\n        setSocket(connection)\r\n    }, [] );\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route\r\n                    path=\"/chat-video\"\r\n                    render= {(pr) => <Consultation {...pr} socket={socket} /> }\r\n                />\r\n                <Route\r\n                path=\"/\"\r\n                render= {(pr) => <MedecinPro {...pr} socket={socket} /> }\r\n                />\r\n            </Switch> \r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"mUAAA,MAAOA,MAAP,EAAcC,SAAd,CAAyBC,QAAzB,KAAwC,OAAxC,CAEA,MAAOC,WAAP,KAAuB,cAAvB,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CAEA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,kBAA9B,CAEA,MAAOC,QAAP,KAAoB,WAApB,CAEA,MAAOC,GAAP,KAAe,kBAAf,CAEA,MAAO,oBAAP,CACA,OAASC,OAAT,KAAwB,cAAxB,CAGA,cAAe,SAASC,OAAT,CAAgBC,KAAhB,CAAuB,CAClC,cAA4BT,QAAQ,EAApC,wCAAOU,MAAP,eAAeC,SAAf,eACA,eAAsCX,QAAQ,CAAC,EAAD,CAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eAEA,aAAmBN,OAAO,EAA1B,CAAOO,QAAP,UAAOA,QAAP,CAEAf,SAAS,CAAC,UAAM,CAEZ,GAAMgB,QAAO,CAAG,CACZC,IAAI,CAAC,YADO,CAEZC,YAAY,CAAE,IAFF,CAGZC,oBAAoB,CAAEC,QAHV,CAIZC,UAAU,CAAE,CAAC,WAAD,CAJA,CAAhB,CAOA,GAAIC,WAAU,CAAGf,EAAE,CAACgB,OAAH,CAAWjB,OAAO,CAACkB,WAAnB,CAAgCR,OAAhC,CAAjB,CACAM,UAAU,CAACG,EAAX,CAAc,SAAd,CAAyB,UAAM,CAC7BC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAEAL,UAAU,CAACM,IAAX,CAAgB,cAAhB,gCAAqCb,QAAQ,CAACc,IAA9C,MAAoDC,EAAE,CAAE,IAAMf,QAAQ,CAACc,IAAT,CAAcC,EAA5E,GAAmF,cAAuB,IAArBC,MAAqB,MAArBA,KAAqB,CAAdC,OAAc,MAAdA,OAAc,CACxGN,OAAO,CAACC,GAAR,CAAYI,KAAZ,CAAmBC,OAAnB,EACA,GAAGD,KAAH,CAAU,CACNjB,cAAc,CAACiB,KAAD,CAAQC,OAAR,CAAd,CACH,CAFD,IAGI,CAEH,CACJ,CARC,EASD,CAZD,EAcAV,UAAU,CAACG,EAAX,CAAc,eAAd,CAA+B,SAACM,KAAD,CAAW,CACtCL,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BI,KAA7B,EACH,CAFD,EAIAT,UAAU,CAACG,EAAX,CAAc,YAAd,CAA4B,SAACQ,MAAD,CAAY,CACpCP,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BM,MAA1B,EAEH,CAHD,EAMAX,UAAU,CAACG,EAAX,CAAc,mBAAd,CAAmC,UAAM,CACrCC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAEH,CAHD,EAKAL,UAAU,CAACG,EAAX,CAAc,cAAd,CAA8B,UAAM,CAChCC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAEH,CAHD,EAIAL,UAAU,CAACG,EAAX,CAAc,WAAd,CAA2B,UAAM,CAC7BC,OAAO,CAACC,GAAR,CAAY,WAAZ,EAGH,CAJD,EAQAf,SAAS,CAACU,UAAD,CAAT,CACH,CApDQ,CAoDN,EApDM,CAAT,CAsDA,mBACI,4CACI,oBAAC,MAAD,mBACI,oBAAC,KAAD,EACI,IAAI,CAAC,aADT,CAEI,MAAM,CAAG,gBAACY,EAAD,qBAAQ,oBAAC,YAAD,kBAAkBA,EAAlB,EAAsB,MAAM,CAAEvB,MAA9B,GAAR,EAFb,EADJ,cAKI,oBAAC,KAAD,EACA,IAAI,CAAC,GADL,CAEA,MAAM,CAAG,gBAACuB,EAAD,qBAAQ,oBAAC,UAAD,kBAAgBA,EAAhB,EAAoB,MAAM,CAAEvB,MAA5B,GAAR,EAFT,EALJ,CADJ,CADJ,CAcH"},"metadata":{},"sourceType":"module"}