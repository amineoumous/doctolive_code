{"ast":null,"code":"import _slicedToArray from \"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\src\\\\components\\\\modals\\\\AddModals.js\";\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport { Modal, Button, Row, Col, Collapse, Alert } from 'react-bootstrap';\nimport { MenuItem, FormControl, Select, TextField, InputLabel } from '@material-ui/core';\nimport moment from 'moment';\nvar backendUrl = \"http://localhost:5000/\";\nexport default function AddModal(props) {\n  var _useState = useState(moment()),\n      _useState2 = _slicedToArray(_useState, 2),\n      dateDay = _useState2[0],\n      setDateDay = _useState2[1]; // const [date_start, setDateStart] = useState(props.addEvent?.slot?.start !== undefined ?  moment(props.addEvent.slot.start).format(\"HH:mm\") : \"10:00\");\n\n\n  var _useState3 = useState(props.addEvent.currentDate),\n      _useState4 = _slicedToArray(_useState3, 2),\n      date_start = _useState4[0],\n      setDateStart = _useState4[1];\n\n  var _useState5 = useState(\"00:15\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      duree = _useState6[0],\n      setDuree = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      title = _useState8[0],\n      setTitle = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      informations = _useState10[0],\n      setInformations = _useState10[1];\n\n  var _useState11 = useState(1),\n      _useState12 = _slicedToArray(_useState11, 2),\n      categorie = _useState12[0],\n      setCategorie = _useState12[1];\n\n  var _useState13 = useState({}),\n      _useState14 = _slicedToArray(_useState13, 2),\n      errors = _useState14[0],\n      setErrors = _useState14[1];\n\n  var sendData = function sendData() {\n    var ellementDuree = duree.split(\":\");\n    ellementDuree.map(function (elmnt) {\n      return parseInt(elmnt);\n    });\n    var end = moment(date_start, \"HH:mm\").add(ellementDuree[1], \"minutes\");\n    end.add(ellementDuree[0], \"hours\");\n    var start = dateDay.format(\"YYYY-MM-DD\") + \"T\" + date_start + \":00.356Z\";\n    var data = {\n      title: title,\n      content: informations,\n      start: start,\n      end: dateDay.format(\"YYYY-MM-DD\") + \"T\" + end.format(\"HH:mm:ss[.365Z]\"),\n      categoryId: categorie\n    };\n    Axios.post(\"\".concat(backendUrl, \"event\"), data, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      if (response) {\n        if (!response.data.error) {\n          props.setNewEvent(response.data.event);\n        } else {// setErrors( (errors) => {return {events: true}})\n        }\n      }\n    })[\"catch\"](function (err) {\n      if (err.response) {\n        if (err.response.status === 500) {}\n\n        if (err.response.status === 403) {\n          var setingError = {};\n          err.response.data.errors.map(function (error) {\n            return setingError[error.param] = true;\n          });\n          setErrors(setingError);\n        }\n      }\n    });\n  };\n\n  useEffect(function () {\n    setDateStart(props.addEvent.slot.start !== undefined ? moment(props.addEvent.slot.start).format(\"HH:mm\") : \"10:00\");\n    setDateDay(props.addEvent.slot.start !== undefined ? moment(props.addEvent.slot.start) : moment());\n    return function () {};\n  }, [props.addEvent]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: props.addEvent.show,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Ajouter un \\xE9v\\xE9nement\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    onClick: function onClick() {\n      return props.setModalShow({\n        show: false,\n        slot: {}\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"F\\xE9rmer\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"success\",\n    onClick: sendData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Enregistrer\"))));\n}","map":{"version":3,"names":["React","useState","useEffect","Axios","Modal","Button","Row","Col","Collapse","Alert","MenuItem","FormControl","Select","TextField","InputLabel","moment","backendUrl","AddModal","props","dateDay","setDateDay","addEvent","currentDate","date_start","setDateStart","duree","setDuree","title","setTitle","informations","setInformations","categorie","setCategorie","errors","setErrors","sendData","ellementDuree","split","map","elmnt","parseInt","end","add","start","format","data","content","categoryId","post","headers","then","response","error","setNewEvent","event","err","status","setingError","param","slot","undefined","show","setModalShow"],"sources":["C:/app/doctolive_code/pro-doctolive/src/components/modals/AddModals.js"],"sourcesContent":["\r\nimport React, {useState, useEffect} from 'react'\r\n\r\nimport Axios from 'axios'\r\nimport {Modal, Button, Row, Col, Collapse, Alert} from 'react-bootstrap';\r\n\r\nimport {MenuItem, FormControl, Select, TextField, InputLabel} from '@material-ui/core';\r\nimport moment from 'moment'\r\n\r\n\r\n  let backendUrl = \"http://localhost:5000/\";\r\n\r\n\r\n\r\nexport default function AddModal(props) {\r\n    const [dateDay, setDateDay] = useState(moment());\r\n   // const [date_start, setDateStart] = useState(props.addEvent?.slot?.start !== undefined ?  moment(props.addEvent.slot.start).format(\"HH:mm\") : \"10:00\");\r\n    const [date_start, setDateStart] = useState(props.addEvent.currentDate);\r\n    const [duree, setDuree] = useState(\"00:15\");\r\n    const [title, setTitle] = useState(\"\");\r\n    const [informations, setInformations] = useState(\"\");\r\n    const [categorie, setCategorie] = useState(1);\r\n    const [errors, setErrors] = useState({});\r\n  \r\n     \r\n    const sendData = () => {\r\n      let ellementDuree = duree.split(\":\");\r\n      ellementDuree.map(elmnt => parseInt(elmnt));\r\n  \r\n      let end = moment(date_start, \"HH:mm\").add( ellementDuree[1], \"minutes\")\r\n      end.add(ellementDuree[0], \"hours\")\r\n      let start = dateDay.format(\"YYYY-MM-DD\") +\"T\" + date_start +\":00.356Z\";\r\n  \r\n      let data = {title, content: informations, start  , end: dateDay.format(\"YYYY-MM-DD\") +\"T\" + end.format(\"HH:mm:ss[.365Z]\"), categoryId:categorie};\r\n      Axios.post(`${backendUrl}event`, data,{headers: {'Content-Type': 'application/json'}})\r\n      .then(response =>{\r\n  \r\n        if(response){\r\n          if (!response.data.error) { \r\n            props.setNewEvent(response.data.event)\r\n            \r\n          }else{\r\n            // setErrors( (errors) => {return {events: true}})\r\n          }\r\n        }\r\n       \r\n      })\r\n      .catch(err=> {\r\n        if(err.response){\r\n          if(err.response.status === 500){\r\n  \r\n          }\r\n          if(err.response.status === 403){\r\n            let setingError= {};\r\n            err.response.data.errors.map(error => {\r\n              return setingError[error.param] = true\r\n            })\r\n            setErrors(setingError)\r\n          }\r\n        }\r\n      });\r\n    }\r\n    useEffect(() => {\r\n      setDateStart(props.addEvent.slot.start !== undefined ?  moment(props.addEvent.slot.start).format(\"HH:mm\") : \"10:00\");\r\n      setDateDay(props.addEvent.slot.start !== undefined ?  moment(props.addEvent.slot.start) : moment());\r\n  \r\n      return () => {\r\n        \r\n      }\r\n    }, [props.addEvent])\r\n  \r\n  \r\n    return (\r\n      <div>\r\n    <Modal\r\n       show={props.addEvent.show}\r\n     \r\n      \r\n      >\r\n        <Modal.Header  closeButton>\r\n          <div >\r\n          <h4 className=\"modal-title\" >\r\n            Ajouter un événement\r\n          </h4>\r\n          </div>\r\n        \r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"danger\" onClick={() => props.setModalShow({show: false, slot:{}})}>Férmer</Button>\r\n          <Button variant=\"success\" onClick={sendData}>Enregistrer</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      </div>\r\n    )\r\n  }"],"mappings":";;AACA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,EAAeC,MAAf,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCC,QAAjC,EAA2CC,KAA3C,QAAuD,iBAAvD;AAEA,SAAQC,QAAR,EAAkBC,WAAlB,EAA+BC,MAA/B,EAAuCC,SAAvC,EAAkDC,UAAlD,QAAmE,mBAAnE;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAGE,IAAIC,UAAU,GAAG,wBAAjB;AAIF,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EACpC,gBAA8BjB,QAAQ,CAACc,MAAM,EAAP,CAAtC;EAAA;EAAA,IAAOI,OAAP;EAAA,IAAgBC,UAAhB,iBADoC,CAErC;;;EACC,iBAAmCnB,QAAQ,CAACiB,KAAK,CAACG,QAAN,CAAeC,WAAhB,CAA3C;EAAA;EAAA,IAAOC,UAAP;EAAA,IAAmBC,YAAnB;;EACA,iBAA0BvB,QAAQ,CAAC,OAAD,CAAlC;EAAA;EAAA,IAAOwB,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAA0BzB,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAO0B,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAAwC3B,QAAQ,CAAC,EAAD,CAAhD;EAAA;EAAA,IAAO4B,YAAP;EAAA,IAAqBC,eAArB;;EACA,kBAAkC7B,QAAQ,CAAC,CAAD,CAA1C;EAAA;EAAA,IAAO8B,SAAP;EAAA,IAAkBC,YAAlB;;EACA,kBAA4B/B,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOgC,MAAP;EAAA,IAAeC,SAAf;;EAGA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;IACrB,IAAIC,aAAa,GAAGX,KAAK,CAACY,KAAN,CAAY,GAAZ,CAApB;IACAD,aAAa,CAACE,GAAd,CAAkB,UAAAC,KAAK;MAAA,OAAIC,QAAQ,CAACD,KAAD,CAAZ;IAAA,CAAvB;IAEA,IAAIE,GAAG,GAAG1B,MAAM,CAACQ,UAAD,EAAa,OAAb,CAAN,CAA4BmB,GAA5B,CAAiCN,aAAa,CAAC,CAAD,CAA9C,EAAmD,SAAnD,CAAV;IACAK,GAAG,CAACC,GAAJ,CAAQN,aAAa,CAAC,CAAD,CAArB,EAA0B,OAA1B;IACA,IAAIO,KAAK,GAAGxB,OAAO,CAACyB,MAAR,CAAe,YAAf,IAA8B,GAA9B,GAAoCrB,UAApC,GAAgD,UAA5D;IAEA,IAAIsB,IAAI,GAAG;MAAClB,KAAK,EAALA,KAAD;MAAQmB,OAAO,EAAEjB,YAAjB;MAA+Bc,KAAK,EAALA,KAA/B;MAAwCF,GAAG,EAAEtB,OAAO,CAACyB,MAAR,CAAe,YAAf,IAA8B,GAA9B,GAAoCH,GAAG,CAACG,MAAJ,CAAW,iBAAX,CAAjF;MAAgHG,UAAU,EAAChB;IAA3H,CAAX;IACA5B,KAAK,CAAC6C,IAAN,WAAchC,UAAd,YAAiC6B,IAAjC,EAAsC;MAACI,OAAO,EAAE;QAAC,gBAAgB;MAAjB;IAAV,CAAtC,EACCC,IADD,CACM,UAAAC,QAAQ,EAAG;MAEf,IAAGA,QAAH,EAAY;QACV,IAAI,CAACA,QAAQ,CAACN,IAAT,CAAcO,KAAnB,EAA0B;UACxBlC,KAAK,CAACmC,WAAN,CAAkBF,QAAQ,CAACN,IAAT,CAAcS,KAAhC;QAED,CAHD,MAGK,CACH;QACD;MACF;IAEF,CAZD,WAaO,UAAAC,GAAG,EAAG;MACX,IAAGA,GAAG,CAACJ,QAAP,EAAgB;QACd,IAAGI,GAAG,CAACJ,QAAJ,CAAaK,MAAb,KAAwB,GAA3B,EAA+B,CAE9B;;QACD,IAAGD,GAAG,CAACJ,QAAJ,CAAaK,MAAb,KAAwB,GAA3B,EAA+B;UAC7B,IAAIC,WAAW,GAAE,EAAjB;UACAF,GAAG,CAACJ,QAAJ,CAAaN,IAAb,CAAkBZ,MAAlB,CAAyBK,GAAzB,CAA6B,UAAAc,KAAK,EAAI;YACpC,OAAOK,WAAW,CAACL,KAAK,CAACM,KAAP,CAAX,GAA2B,IAAlC;UACD,CAFD;UAGAxB,SAAS,CAACuB,WAAD,CAAT;QACD;MACF;IACF,CA1BD;EA2BD,CApCD;;EAqCAvD,SAAS,CAAC,YAAM;IACdsB,YAAY,CAACN,KAAK,CAACG,QAAN,CAAesC,IAAf,CAAoBhB,KAApB,KAA8BiB,SAA9B,GAA2C7C,MAAM,CAACG,KAAK,CAACG,QAAN,CAAesC,IAAf,CAAoBhB,KAArB,CAAN,CAAkCC,MAAlC,CAAyC,OAAzC,CAA3C,GAA+F,OAAhG,CAAZ;IACAxB,UAAU,CAACF,KAAK,CAACG,QAAN,CAAesC,IAAf,CAAoBhB,KAApB,KAA8BiB,SAA9B,GAA2C7C,MAAM,CAACG,KAAK,CAACG,QAAN,CAAesC,IAAf,CAAoBhB,KAArB,CAAjD,GAA+E5B,MAAM,EAAtF,CAAV;IAEA,OAAO,YAAM,CAEZ,CAFD;EAGD,CAPQ,EAON,CAACG,KAAK,CAACG,QAAP,CAPM,CAAT;EAUA,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACF,oBAAC,KAAD;IACG,IAAI,EAAEH,KAAK,CAACG,QAAN,CAAewC,IADxB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAKI,oBAAC,KAAD,CAAO,MAAP;IAAe,WAAW,MAA1B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA;IAAI,SAAS,EAAC,aAAd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gCADA,CADF,CALJ,eAaI,oBAAC,KAAD,CAAO,IAAP;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAbJ,eAgBI,oBAAC,KAAD,CAAO,MAAP;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,MAAD;IAAQ,OAAO,EAAC,QAAhB;IAAyB,OAAO,EAAE;MAAA,OAAM3C,KAAK,CAAC4C,YAAN,CAAmB;QAACD,IAAI,EAAE,KAAP;QAAcF,IAAI,EAAC;MAAnB,CAAnB,CAAN;IAAA,CAAlC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,eADF,eAEE,oBAAC,MAAD;IAAQ,OAAO,EAAC,SAAhB;IAA0B,OAAO,EAAExB,QAAnC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBAFF,CAhBJ,CADE,CADF;AAyBD"},"metadata":{},"sourceType":"module"}