{"ast":null,"code":"import _classCallCheck from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Peer from'simple-peer';import autoBind from'react-autobind';import{Button,Row,Col}from'react-bootstrap';import{FaPhoneSlash}from'react-icons/fa';import Axios from'axios';import Config from'Config';var ElemenetsCall=/*#__PURE__*/function(_Component){_inherits(ElemenetsCall,_Component);var _super=_createSuper(ElemenetsCall);function ElemenetsCall(props){var _this;_classCallCheck(this,ElemenetsCall);_this=_super.call(this,props);autoBind(_assertThisInitialized(_this));_this.state={stream:null,passingCall:false,patientReady:false};_this.timerCall=null;return _this;}_createClass(ElemenetsCall,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setupSocket();var constraints={video:{facingMode:\"user\",width:640,height:480,cursor:\"motion\"},audio:true};this.initiatorCallVideo(constraints).then(function(stream){window.streamReference=stream;_this2.setState({stream:stream});try{_this2.myVideo.srcObject=stream;}catch(e){_this2.myVideo.src=URL.createObjectURL(stream);}// try {\n//     this.callerTone.src = callerTone\n// } catch (e) {\n//     this.callerTone.srcObject =  URL.createObjectURL(callerTone) \n// }\n_this2.props.socket.emit('call-patient',{selectedUser:'p'+_this2.props.patient.id},function(response){});}).catch(function(err){console.log(\"Unable to fetsh stream \".concat(err));});}},{key:\"setupSocket\",value:function setupSocket(){var _this3=this;var socket=this.props.socket;socket.on('reject-call-medecin',function(response){_this3.stopStream();_this3.setState({stream:null,responding:false});_this3.props.setonCalling(false);});socket.on('signal-call',function(_ref){var data=_ref.data;var peer=_this3.setUpPeer();_this3.setState({peer:peer});console.log(data);peer.signal(data);});socket.on('ready-patient',function(response){socket.emit('client-call',{selectedUser:'p'+_this3.props.patient.id},function(){});_this3.setState({patientReady:true});_this3.timerCall=setTimeout(function(){if(!_this3.state.responding){_this3.rejectCall();}},15000);// this.callerTone.play();          \n});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.socket.removeAllListeners('reject-call-medecin');this.props.socket.removeAllListeners('signal-call');this.props.socket.removeAllListeners('ready-patient');if(this.timerCall!==null){clearTimeout(this.timerCall);}if(this.state.peer){this.state.peer.destroy();}}},{key:\"setUpPeer\",value:function setUpPeer(){var _this4=this;var peer=new Peer({initiator:false,stream:this.state.stream,config:{iceServers:[{urls:\"stun:pelia.ma:3478\"},{urls:\"turn:pelia.ma:3478\",username:\"peliaturn\",credential:\"ejfLUNE6C=fM&4P!\"}]},trickle:false});peer.on('signal',function(data){_this4.props.socket.emit('medecin-confirm-call',{selectedUser:'p'+_this4.props.patient.id,data:data});});peer.on('stream',function(stream){try{_this4.userVideo.srcObject=stream;}catch(e){_this4.userVideo.src=URL.createObjectURL(stream);}_this4.userVideo.play();// this.callerTone.pause();\n_this4.setState({passingCall:true,responding:true,timeAppel:Date.now()});// post call time start !\nAxios.post(\"\".concat(Config.BACKEND_URL,\"/consultation/videocall/\").concat(_this4.props.teleconsultation.id),{},{headers:{'Content-Type':'application/json','Authorization':\"token \".concat(_this4.props.UserData.token)}}).then(function(result){console.log(result.data.videocall.id);_this4.setState({callId:result.data.videocall.id});}).catch(function(e){console.log(e.response);});});peer.on('close',function(){// post call time start !\nAxios.put(\"\".concat(Config.BACKEND_URL,\"/consultation/videocall/\").concat(_this4.state.callId),{},{headers:{'Content-Type':'application/json','Authorization':\"token \".concat(_this4.props.UserData.token)}}).then(function(result){}).catch(function(e){console.log(e.response);});_this4.stopStream();_this4.setState({passingCall:false,stream:null,responding:false});_this4.props.setonCalling(false);if(_this4.state.peer){_this4.state.peer.destroy();}});peer.on('error',function(err){console.log(\"vous avez perdue la connextion avec votre patient \".concat(err));});return peer;}},{key:\"initiatorCallVideo\",value:function initiatorCallVideo(constraints){return new Promise(function(resolve,reject){navigator.mediaDevices.getUserMedia(constraints).then(function(stream){resolve(stream);}).catch(function(err){reject(err);});});}},{key:\"stopStream\",value:function stopStream(){// if(this.callerTone !== null){\n//     this.callerTone.muted = true;\n//     this.callerTone= null;\n// }\nif(!window.streamReference)return;window.streamReference.getAudioTracks().forEach(function(track){track.stop();});window.streamReference.getVideoTracks().forEach(function(track){track.stop();});window.streamReference=null;}},{key:\"rejectCall\",value:function rejectCall(){this.props.socket.emit('medecin-reject',{selectedUser:'p'+this.props.patient.id,reject:true},function(){});this.stopStream();this.setState({passingCall:false,stream:null,responding:false});this.props.setonCalling(false);}},{key:\"render\",value:function render(){var _this5=this;var _this$state=this.state,responding=_this$state.responding,passingCall=_this$state.passingCall;return/*#__PURE__*/React.createElement(\"div\",{className:\"video medecin\"},/*#__PURE__*/React.createElement(\"audio\",{ref:function ref(_ref2){return _this5.callerTone=_ref2;},playsInline:true,loop:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(Row,{className:responding?\"repondre video-container m-0 justify-content-center\":\"video-container m-0 justify-content-center\"},/*#__PURE__*/React.createElement(\"video\",{id:\"peerVid\",ref:function ref(_ref3){_this5.userVideo=_ref3;},playsInline:true,autoPlay:true}),/*#__PURE__*/React.createElement(\"video\",{id:\"myVid\",muted:true,ref:function ref(_ref4){_this5.myVideo=_ref4;},playsInline:true,autoPlay:true})),/*#__PURE__*/React.createElement(Row,{className:!passingCall?\"responding process\":\"responding\"},/*#__PURE__*/React.createElement(Col,{style:{paddingLeft:0}},/*#__PURE__*/React.createElement(\"div\",{className:\"layer\"}),!passingCall&&/*#__PURE__*/React.createElement(Row,{className:\"text-center d-flex justify-content-around w-100 p-4 ml-1 mt-5\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center caller \",style:{maxHeight:\"20%\"}},\" \",this.state.patientReady?\"appel en cours ...\":\"en attente de connexion avec votre patient\",\" \")),/*#__PURE__*/React.createElement(Row,{className:\"end-call\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this5.rejectCall();},className:\"action\",type:\"button\",variant:\"danger\"},/*#__PURE__*/React.createElement(FaPhoneSlash,null)))))));}}]);return ElemenetsCall;}(Component);export{ElemenetsCall as default};","map":{"version":3,"names":["React","Component","Peer","autoBind","Button","Row","Col","FaPhoneSlash","Axios","Config","ElemenetsCall","props","state","stream","passingCall","patientReady","timerCall","setupSocket","constraints","video","facingMode","width","height","cursor","audio","initiatorCallVideo","then","window","streamReference","setState","myVideo","srcObject","e","src","URL","createObjectURL","socket","emit","selectedUser","patient","id","response","catch","err","console","log","on","stopStream","responding","setonCalling","data","peer","setUpPeer","signal","setTimeout","rejectCall","removeAllListeners","clearTimeout","destroy","initiator","config","iceServers","urls","username","credential","trickle","userVideo","play","timeAppel","Date","now","post","BACKEND_URL","teleconsultation","headers","UserData","token","result","videocall","callId","put","Promise","resolve","reject","navigator","mediaDevices","getUserMedia","getAudioTracks","forEach","track","stop","getVideoTracks","ref","callerTone","paddingLeft","maxHeight"],"sources":["C:/app/doctolive_code/pro-doctolive/src/views/Chat/VideoCall.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Peer from 'simple-peer';\r\nimport autoBind from 'react-autobind';\r\n\r\nimport { Button, Row, Col} from 'react-bootstrap'\r\nimport {FaPhoneSlash} from 'react-icons/fa'\r\n\r\nimport Axios from 'axios'\r\nimport Config from 'Config';\r\n\r\n\r\n\r\nexport default class ElemenetsCall extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        autoBind(this);\r\n        this.state = {\r\n            stream: null,\r\n            passingCall:false,\r\n            patientReady:false\r\n        };\r\n        this.timerCall = null;\r\n    }\r\n    \r\n    componentDidMount() {\r\n        this.setupSocket();\r\n        const constraints={\r\n            video: {\r\n                facingMode: \"user\", \r\n                width: 640, \r\n                height: 480, \r\n                cursor:\"motion\"\r\n            }, \r\n            audio:true\r\n         }\r\n       \r\n        this.initiatorCallVideo(constraints)\r\n        .then((stream)=> {\r\n            window.streamReference = stream;\r\n            this.setState({ stream : stream});\r\n            try {\r\n                this.myVideo.srcObject = stream;\r\n            } catch (e) {\r\n                this.myVideo.src = URL.createObjectURL(stream)\r\n            }\r\n            // try {\r\n            //     this.callerTone.src = callerTone\r\n            // } catch (e) {\r\n            //     this.callerTone.srcObject =  URL.createObjectURL(callerTone) \r\n            // }\r\n            this.props.socket.emit('call-patient', { selectedUser: 'p' + this.props.patient.id}, (response) => {});\r\n        })\r\n        .catch((err)=>{\r\n            console.log(`Unable to fetsh stream ${err}`)\r\n        })\r\n       \r\n    }\r\n\r\n    setupSocket(){\r\n        let socket = this.props.socket;\r\n        socket.on('reject-call-medecin', (response) => {\r\n            this.stopStream();\r\n            this.setState({ stream : null, responding:false});  \r\n            this.props.setonCalling(false)\r\n        });\r\n\r\n        socket.on('signal-call', ({data}) => {\r\n            let peer = this.setUpPeer();\r\n            this.setState({peer})\r\n            console.log(data)\r\n            peer.signal(data);\r\n        });\r\n        \r\n        socket.on('ready-patient', (response) => {\r\n            socket.emit('client-call', {selectedUser: 'p' + this.props.patient.id}, () => {  });\r\n            this.setState({patientReady: true});\r\n            this.timerCall = setTimeout(() => {\r\n                if(!this.state.responding){\r\n                    (this.rejectCall())\r\n                }\r\n            }, 15000);\r\n            // this.callerTone.play();          \r\n        });\r\n    }\r\n    componentWillUnmount(){\r\n        this.props.socket.removeAllListeners('reject-call-medecin')\r\n        this.props.socket.removeAllListeners('signal-call')\r\n        this.props.socket.removeAllListeners('ready-patient')\r\n        if(this.timerCall !== null){\r\n            clearTimeout(this.timerCall)\r\n        }\r\n        if(this.state.peer){\r\n            this.state.peer.destroy();\r\n        }\r\n    }\r\n\r\n    setUpPeer(){\r\n        const peer = new Peer({\r\n            initiator: false,\r\n            stream: this.state.stream,\r\n            config: { iceServers: \r\n                [\r\n                    {\r\n                      urls: \"stun:pelia.ma:3478\",\r\n                    },\r\n                    {\r\n                      urls: \"turn:pelia.ma:3478\",\r\n                      username: \"peliaturn\",\r\n                      credential: \"ejfLUNE6C=fM&4P!\"\r\n                    }\r\n                ]\r\n            },\r\n            trickle: false\r\n        });\r\n\r\n        peer.on('signal', (data) => {\r\n            this.props.socket.emit('medecin-confirm-call', {selectedUser: 'p' + this.props.patient.id, data})\r\n        })\r\n        \r\n        peer.on('stream', (stream) => {\r\n            try {\r\n                this.userVideo.srcObject = stream;\r\n            } catch (e) {\r\n                this.userVideo.src = URL.createObjectURL(stream)\r\n            }\r\n            this.userVideo.play();\r\n            // this.callerTone.pause();\r\n            this.setState({passingCall: true, responding: true, timeAppel: Date.now() })\r\n\r\n                // post call time start !\r\n                Axios.post(`${Config.BACKEND_URL}/consultation/videocall/${this.props.teleconsultation.id}`,{} , { \r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `token ${this.props.UserData.token}`,\r\n                    }\r\n                })\r\n                .then(result => {\r\n                    console.log(result.data.videocall.id);\r\n                    this.setState({callId: result.data.videocall.id})\r\n                }).catch(e => {\r\n                    console.log(e.response)\r\n                });\r\n        });\r\n\r\n        peer.on('close', () =>{\r\n            // post call time start !\r\n            Axios.put(`${Config.BACKEND_URL}/consultation/videocall/${this.state.callId}`,{} , { \r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `token ${this.props.UserData.token}`,\r\n                }\r\n            })\r\n            .then(result => {\r\n               \r\n            }).catch(e => {\r\n                console.log(e.response)\r\n            });\r\n\r\n            this.stopStream();\r\n            this.setState({passingCall: false, stream : null, responding:false});  \r\n            this.props.setonCalling(false)\r\n            if(this.state.peer){\r\n                this.state.peer.destroy()\r\n            }\r\n        });\r\n\r\n        peer.on('error', (err) => {\r\n            console.log( `vous avez perdue la connextion avec votre patient ${err}`)\r\n        });\r\n        return peer;\r\n    }\r\n\r\n     initiatorCallVideo(constraints){\r\n         \r\n        return new Promise((resolve, reject) => {\r\n            navigator.mediaDevices.getUserMedia(constraints)\r\n            .then((stream) => {\r\n                resolve(stream)\r\n            })\r\n            .catch(err => {\r\n                reject(err)\r\n            })\r\n        }); \r\n    }\r\n\r\n    stopStream() {\r\n        // if(this.callerTone !== null){\r\n        //     this.callerTone.muted = true;\r\n        //     this.callerTone= null;\r\n        // }\r\n        if (!window.streamReference) return;\r\n        window.streamReference.getAudioTracks().forEach(function(track) {\r\n            track.stop();\r\n        });\r\n        window.streamReference.getVideoTracks().forEach(function(track) {\r\n            track.stop();\r\n        });\r\n        window.streamReference = null;\r\n    }\r\n\r\n    rejectCall(){\r\n        this.props.socket.emit('medecin-reject', {selectedUser: 'p' + this.props.patient.id , reject: true }, () => {\r\n            \r\n        })\r\n        this.stopStream();\r\n        this.setState({ passingCall: false, stream : null, responding:false});  \r\n        this.props.setonCalling(false)\r\n        \r\n    }\r\n      \r\n    render() {\r\n        let { responding, passingCall} = this.state;\r\n        return (\r\n            <div className=\"video medecin\">\r\n                \r\n                <audio ref={ref => this.callerTone = ref} playsInline loop />\r\n                <div className=\"\">\r\n                <Row className={responding ? \"repondre video-container m-0 justify-content-center\" : \"video-container m-0 justify-content-center\"}>\r\n                    <video id=\"peerVid\" ref={(ref) => {this.userVideo = ref;}} playsInline autoPlay />\r\n                    <video id=\"myVid\" muted={true} ref={(ref) => {this.myVideo = ref;}}  playsInline autoPlay />\r\n                </Row>\r\n                   \r\n                <Row className={!passingCall ? \"responding process\": \"responding\"}>   \r\n                    <Col style={{paddingLeft:0}}>\r\n                    <div className=\"layer\"></div>\r\n                    { !passingCall &&                      \r\n                        <Row className=\"text-center d-flex justify-content-around w-100 p-4 ml-1 mt-5\">   \r\n                            <p className=\"text-center caller \" style={{maxHeight: \"20%\"}}> {this.state.patientReady ? \"appel en cours ...\": \"en attente de connexion avec votre patient\"} </p>\r\n                        </Row>    \r\n                    }\r\n                    <Row className=\"end-call\">\r\n                    <Button\r\n                        onClick={() => this.rejectCall()}\r\n                        className=\"action\" \r\n                        type=\"button\"\r\n                        variant= \"danger\"\r\n                        >\r\n                            <FaPhoneSlash /> \r\n                        </Button>\r\n                    </Row>\r\n                    </Col>\r\n                </Row>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}