{"ast":null,"code":"var _require = require(\"./commons\"),\n    PACKET_TYPES_REVERSE = _require.PACKET_TYPES_REVERSE,\n    ERROR_PACKET = _require.ERROR_PACKET;\n\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nvar base64decoder;\n\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nvar decodePacket = function decodePacket(encodedPacket, binaryType) {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n\n  var type = encodedPacket.charAt(0);\n\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n\n  var packetType = PACKET_TYPES_REVERSE[type];\n\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n\n  return encodedPacket.length > 1 ? {\n    type: PACKET_TYPES_REVERSE[type],\n    data: encodedPacket.substring(1)\n  } : {\n    type: PACKET_TYPES_REVERSE[type]\n  };\n};\n\nvar decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n  if (base64decoder) {\n    var decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return {\n      base64: true,\n      data: data\n    }; // fallback for old browsers\n  }\n};\n\nvar mapBinary = function mapBinary(data, binaryType) {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n\n    case \"arraybuffer\":\n    default:\n      return data;\n    // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;","map":{"version":3,"names":["require","PACKET_TYPES_REVERSE","ERROR_PACKET","withNativeArrayBuffer","ArrayBuffer","base64decoder","decodePacket","encodedPacket","binaryType","type","data","mapBinary","charAt","decodeBase64Packet","substring","packetType","length","decoded","decode","base64","Blob","module","exports"],"sources":["C:/app/doctolive_code/pro-doctolive/node_modules/engine.io-parser/lib/decodePacket.browser.js"],"sourcesContent":["const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require(\"./commons\");\r\n\r\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\r\n\r\nlet base64decoder;\r\nif (withNativeArrayBuffer) {\r\n  base64decoder = require(\"base64-arraybuffer\");\r\n}\r\n\r\nconst decodePacket = (encodedPacket, binaryType) => {\r\n  if (typeof encodedPacket !== \"string\") {\r\n    return {\r\n      type: \"message\",\r\n      data: mapBinary(encodedPacket, binaryType)\r\n    };\r\n  }\r\n  const type = encodedPacket.charAt(0);\r\n  if (type === \"b\") {\r\n    return {\r\n      type: \"message\",\r\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\r\n    };\r\n  }\r\n  const packetType = PACKET_TYPES_REVERSE[type];\r\n  if (!packetType) {\r\n    return ERROR_PACKET;\r\n  }\r\n  return encodedPacket.length > 1\r\n    ? {\r\n        type: PACKET_TYPES_REVERSE[type],\r\n        data: encodedPacket.substring(1)\r\n      }\r\n    : {\r\n        type: PACKET_TYPES_REVERSE[type]\r\n      };\r\n};\r\n\r\nconst decodeBase64Packet = (data, binaryType) => {\r\n  if (base64decoder) {\r\n    const decoded = base64decoder.decode(data);\r\n    return mapBinary(decoded, binaryType);\r\n  } else {\r\n    return { base64: true, data }; // fallback for old browsers\r\n  }\r\n};\r\n\r\nconst mapBinary = (data, binaryType) => {\r\n  switch (binaryType) {\r\n    case \"blob\":\r\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\r\n    case \"arraybuffer\":\r\n    default:\r\n      return data; // assuming the data is already an ArrayBuffer\r\n  }\r\n};\r\n\r\nmodule.exports = decodePacket;\r\n"],"mappings":"AAAA,eAA+CA,OAAO,CAAC,WAAD,CAAtD;AAAA,IAAQC,oBAAR,YAAQA,oBAAR;AAAA,IAA8BC,YAA9B,YAA8BA,YAA9B;;AAEA,IAAMC,qBAAqB,GAAG,OAAOC,WAAP,KAAuB,UAArD;AAEA,IAAIC,aAAJ;;AACA,IAAIF,qBAAJ,EAA2B;EACzBE,aAAa,GAAGL,OAAO,CAAC,oBAAD,CAAvB;AACD;;AAED,IAAMM,YAAY,GAAG,SAAfA,YAAe,CAACC,aAAD,EAAgBC,UAAhB,EAA+B;EAClD,IAAI,OAAOD,aAAP,KAAyB,QAA7B,EAAuC;IACrC,OAAO;MACLE,IAAI,EAAE,SADD;MAELC,IAAI,EAAEC,SAAS,CAACJ,aAAD,EAAgBC,UAAhB;IAFV,CAAP;EAID;;EACD,IAAMC,IAAI,GAAGF,aAAa,CAACK,MAAd,CAAqB,CAArB,CAAb;;EACA,IAAIH,IAAI,KAAK,GAAb,EAAkB;IAChB,OAAO;MACLA,IAAI,EAAE,SADD;MAELC,IAAI,EAAEG,kBAAkB,CAACN,aAAa,CAACO,SAAd,CAAwB,CAAxB,CAAD,EAA6BN,UAA7B;IAFnB,CAAP;EAID;;EACD,IAAMO,UAAU,GAAGd,oBAAoB,CAACQ,IAAD,CAAvC;;EACA,IAAI,CAACM,UAAL,EAAiB;IACf,OAAOb,YAAP;EACD;;EACD,OAAOK,aAAa,CAACS,MAAd,GAAuB,CAAvB,GACH;IACEP,IAAI,EAAER,oBAAoB,CAACQ,IAAD,CAD5B;IAEEC,IAAI,EAAEH,aAAa,CAACO,SAAd,CAAwB,CAAxB;EAFR,CADG,GAKH;IACEL,IAAI,EAAER,oBAAoB,CAACQ,IAAD;EAD5B,CALJ;AAQD,CA1BD;;AA4BA,IAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACH,IAAD,EAAOF,UAAP,EAAsB;EAC/C,IAAIH,aAAJ,EAAmB;IACjB,IAAMY,OAAO,GAAGZ,aAAa,CAACa,MAAd,CAAqBR,IAArB,CAAhB;IACA,OAAOC,SAAS,CAACM,OAAD,EAAUT,UAAV,CAAhB;EACD,CAHD,MAGO;IACL,OAAO;MAAEW,MAAM,EAAE,IAAV;MAAgBT,IAAI,EAAJA;IAAhB,CAAP,CADK,CAC0B;EAChC;AACF,CAPD;;AASA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACD,IAAD,EAAOF,UAAP,EAAsB;EACtC,QAAQA,UAAR;IACE,KAAK,MAAL;MACE,OAAOE,IAAI,YAAYN,WAAhB,GAA8B,IAAIgB,IAAJ,CAAS,CAACV,IAAD,CAAT,CAA9B,GAAiDA,IAAxD;;IACF,KAAK,aAAL;IACA;MACE,OAAOA,IAAP;IAAa;EALjB;AAOD,CARD;;AAUAW,MAAM,CAACC,OAAP,GAAiBhB,YAAjB"},"metadata":{},"sourceType":"script"}