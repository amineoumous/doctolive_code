{"ast":null,"code":"import _objectSpread from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\app\\\\doctolive_code\\\\pro-doctolive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function _regeneratorRuntime(){\"use strict\";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol=\"function\"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||\"@@iterator\",asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\",toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},\"\");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=\"suspendedStart\";return function(method,arg){if(\"executing\"===state)throw new Error(\"Generator is already running\");if(\"completed\"===state){if(\"throw\"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(\"next\"===context.method)context.sent=context._sent=context.arg;else if(\"throw\"===context.method){if(\"suspendedStart\"===state)throw state=\"completed\",context.arg;context.dispatchException(context.arg);}else\"return\"===context.method&&context.abrupt(\"return\",context.arg);state=\"executing\";var record=tryCatch(innerFn,self,context);if(\"normal\"===record.type){if(state=context.done?\"completed\":\"suspendedYield\",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}\"throw\"===record.type&&(state=\"completed\",context.method=\"throw\",context.arg=record.arg);}};}(innerFn,self,context),generator;}function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)};}catch(err){return{type:\"throw\",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(\"throw\"!==record.type){var result=record.arg,value=result.value;return value&&\"object\"==typeof value&&hasOwn.call(value,\"__await\")?PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject);},function(err){invoke(\"throw\",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke(\"throw\",error,resolve,reject);});}reject(record.arg);}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();};}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,\"throw\"===context.method){if(delegate.iterator.return&&(context.method=\"return\",context.arg=undefined,maybeInvokeDelegate(delegate,context),\"throw\"===context.method))return ContinueSentinel;context.method=\"throw\",context.arg=new TypeError(\"The iterator does not provide a 'throw' method\");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if(\"throw\"===record.type)return context.method=\"throw\",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,\"return\"!==context.method&&(context.method=\"next\",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method=\"throw\",context.arg=new TypeError(\"iterator result is not an object\"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if(\"function\"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;){if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;}return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,\"constructor\",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,\"constructor\",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\"),exports.isGeneratorFunction=function(genFun){var ctor=\"function\"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||\"GeneratorFunction\"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,\"GeneratorFunction\")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,\"Generator\"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,\"toString\",function(){return\"[object Generator]\";}),exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this){\"t\"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);}},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if(\"throw\"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type=\"throw\",record.arg=exception,context.next=loc,caught&&(context.method=\"next\",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if(\"root\"===entry.tryLoc)return handle(\"end\");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\"),hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error(\"try statement without catch or finally\");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&(\"break\"===type||\"continue\"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method=\"next\",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if(\"throw\"===record.type)throw record.arg;return\"break\"===record.type||\"continue\"===record.type?this.next=record.arg:\"return\"===record.type?(this.rval=this.arg=record.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(\"throw\"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error(\"illegal catch attempt\");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},\"next\"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}import React,{useState,useMemo,useEffect,useCallback}from'react';import{Row,Col,Collapse,Alert}from'react-bootstrap';import SubmitButton from'components/CustomButtons/SubmitButton.js';// import AddIcon from '@material-ui/icons/Add';\nimport{useDropzone}from'react-dropzone';import{useAuth}from\"context/Auth\";import Config from'Config';import{Typography}from'@material-ui/core';import FileRejectedIcon from'assets/img/file-rejected.png';import{uploadDocuments,deleteDocument}from'services/uploads/uploadsImages';import AcceptedFile from'assets/img/fileaccepted.png';import{TiDeleteOutline}from'react-icons/ti';import ReactFancyBox from'react-fancybox';var baseStyle={flex:1,display:'flex',flexDirection:'column',alignItems:'center',padding:'40px 20px',cursor:'pointer',borderWidth:2,borderRadius:2,borderColor:'#eeeeee',borderStyle:'dashed',backgroundColor:'#fafafa',color:'#bdbdbd',outline:'none',transition:'border .24s ease-in-out'};var activeStyle={borderColor:'#2196f3'};var acceptStyle={borderColor:'#00e676'};var rejectStyle={borderColor:'#ff1744'};export default function Images(props){var _props$consultation;var _useAuth=useAuth(),UserData=_useAuth.UserData;var _useState=useState({success:false,sending:false,donneIncorrect:false}),_useState2=_slicedToArray(_useState,2),etatRequest=_useState2[0],setEtatRequest=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],setFiles=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),rejectedFiles=_useState6[0],setRejectedFiles=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),savedPictures=_useState8[0],setSavedPictures=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),canceledPictures=_useState10[0],setCanceledPictures=_useState10[1];useEffect(function(){if(props.documents){setSavedPictures(props.documents);}return function(){};},[props.documents]);useEffect(function(){if(props.socket){props.socket.on('newDocuments',function(response){if(response.consultationId===props.consultation.id){setSavedPictures(function(oldPic){return[].concat(_toConsumableArray(oldPic),_toConsumableArray(response.uploadedFiles));});}});}return function(){if(props.socket){props.socket.removeAllListeners('newDocuments');}};},[props.socket]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var uploadingFile;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setEtatRequest(function(oldData){return _objectSpread(_objectSpread({},oldData),{},{sending:true});});_context.next=4;return uploadDocuments(files,UserData.token,props.consultation);case 4:uploadingFile=_context.sent;if(!uploadingFile){setEtatRequest(function(oldData){return _objectSpread(_objectSpread({},oldData),{},{sending:false,success:false,donneIncorrect:true});});}else if(!uploadingFile.error){setEtatRequest(function(oldData){return _objectSpread(_objectSpread({},oldData),{},{sending:false,success:true});});if(uploadingFile.savedPictures.length>0){setSavedPictures(function(oldFile){return[].concat(_toConsumableArray(oldFile),_toConsumableArray(uploadingFile.savedPictures));});}if(uploadingFile.canceledData.length>0){uploadingFile.canceledData.map(function(dd){setCanceledPictures(function(oldData){return[].concat(_toConsumableArray(oldData),[files[dd.index]]);});});setFiles([]);setRejectedFiles([]);}else{setFiles([]);setRejectedFiles([]);}props.socket.emit('newDocuments',{uploadedFiles:uploadingFile.savedPictures,consultationId:props.consultation.id,selectedUser:\"p\"+props.consultation.patient.id},function(response){});}else{setEtatRequest(function(oldData){return _objectSpread(_objectSpread({},oldData),{},{sending:false,success:false,donneIncorrect:true});});}case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var deleteImageHandle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(file){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(Config.BACKEND_URL,\"/upload/document\"),{method:'DELETE',body:JSON.stringify({path:file.path,id:file.id}),headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"token \".concat(UserData.token)}});case 2:response=_context2.sent;response.json().then(function(response){var index=savedPictures.findIndex(function(fl){return fl.id===file.id;});setSavedPictures(function(oldFiles){var clone=_toConsumableArray(oldFiles);clone.splice(index,1);return clone;});}).catch(function(error){});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteImageHandle(_x2){return _ref2.apply(this,arguments);};}();var removeImageHandle=function removeImageHandle(file){var index=files.findIndex(function(fl){return fl.id===file.id;});setFiles(function(oldFiles){var clone=_toConsumableArray(oldFiles);clone.splice(index,1);return clone;});};var onDrop=useCallback(function(acceptedFiles,rejectedFiles){rejectedFiles.map(function(rejectedFile){if(rejectedFile.file.type.split('/')[0]===\"image\"){var reader=new FileReader();reader.readAsDataURL(rejectedFile.file);reader.onloadend=function(){var newFile={filePath:reader.result,realName:rejectedFile.file.name,type:'file',fileType:rejectedFile.file.type.split('/')[0]};setRejectedFiles(function(existing){return[].concat(_toConsumableArray(existing),[{file:newFile,errors:rejectedFile.errors}]);});};}else{var newFile={realName:rejectedFile.file.name,type:'file',fileType:rejectedFile.file.type.split('/')[0]};setRejectedFiles(function(existing){return[].concat(_toConsumableArray(existing),[{file:newFile,errors:rejectedFile.errors}]);});}});acceptedFiles.forEach(function(file){var reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=function(){var newFile={filePath:reader.result,realName:file.name,type:'file',fileType:\"image\",kind:file.type};setFiles(function(existing){return[].concat(_toConsumableArray(existing),[newFile]);});};});},[]);var _useDropzone=useDropzone({onDrop:onDrop,accept:'image/jpeg, image/png, image/jpg, application/pdf'}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive,isDragAccept=_useDropzone.isDragAccept,isDragReject=_useDropzone.isDragReject;var style=useMemo(function(){return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},baseStyle),isDragActive?activeStyle:{}),isDragAccept?acceptStyle:{}),isDragReject?rejectStyle:{});},[isDragActive,isDragReject,isDragAccept]);return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,autoComplete:\"off\"},/*#__PURE__*/React.createElement(Col,null,savedPictures.length>0?/*#__PURE__*/React.createElement(Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h5\"},\" Documents d\\xE9j\\xE0 partager dans cette consultation \")):null,savedPictures.length>0?/*#__PURE__*/React.createElement(Row,{className:\"images-saved\"},savedPictures.map(function(file,index){return/*#__PURE__*/React.createElement(Col,{className:\"mt-5\",lg:\"2\",md:\"4\",xs:\"6\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"image-saved\"},file.type===\"application/pdf\"?/*#__PURE__*/React.createElement(\"a\",{href:Config.BACKEND_URL+file.path,download:file.name,target:\"_blank\",rel:\"noopener noreferrer\"},\"  \",/*#__PURE__*/React.createElement(\"img\",{src:AcceptedFile,alt:\"...\",className:\"img-fluid\"}),\" \"):/*#__PURE__*/React.createElement(ReactFancyBox,{thumbnail:\"\".concat(Config.BACKEND_URL).concat(file.path),showCloseBtn:true,className:\"img-fluid\",image:\"\".concat(Config.BACKEND_URL).concat(file.path)}),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return deleteImageHandle(file);},className:\"delete-button\"},\" \",/*#__PURE__*/React.createElement(TiDeleteOutline,null),\" \")));})):null,((_props$consultation=props.consultation)===null||_props$consultation===void 0?void 0:_props$consultation.active)?/*#__PURE__*/React.createElement(Row,{className:\"align-items-center justify-content-around mt-4 \"},/*#__PURE__*/React.createElement(\"div\",getRootProps({style:style,className:\"dropzone\"}),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(\"p\",null,\"Glisser d\\xE9poser des fichiers ici ou\"),\" \",/*#__PURE__*/React.createElement(\"h4\",null,\" PARCOURIR SUR MON ORDINATEUR \"))):/*#__PURE__*/React.createElement(Row,{className:\"align-items-center justify-content-around mt-4 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropzone\"},/*#__PURE__*/React.createElement(\"p\",null,\" Cette consultation est t\\xE9rminer vous pouvez plus envoyer des documents \"))),canceledPictures.length>0?/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h5\",color:\"error\"},\" Ces images n'on pas pus s'enregistrer au sein de nos serveur. essayer ult\\xE9ri\\xE9rement o\\xF9 bien essayer d'autre images \")):null,canceledPictures.length>0?/*#__PURE__*/React.createElement(Row,{className:\"images-canceled\"},canceledPictures.map(function(file,index){return/*#__PURE__*/React.createElement(Col,{className:\"mt-5\",lg:\"2\",md:\"4\",xs:\"6\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"image-canceled\"},/*#__PURE__*/React.createElement(\"img\",{src:file.filePath,alt:file.realName,className:\"img-fluid\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{color:\"error\"},\" Le serveur n'a pas pus suporter ces fichier \")));})):null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center justify-content-around mt-4 \"},files.map(function(file,index){return/*#__PURE__*/React.createElement(Col,{className:\"mt-5\",lg:\"6\",md:\"6\",xs:\"6\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"selecting-img-container\"},/*#__PURE__*/React.createElement(\"img\",{src:file.kind===\"application/pdf\"?AcceptedFile:file.filePath,alt:file.realName,className:\"img-fluid\"}),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return removeImageHandle(file);},className:\"delete-button\"},\" \",/*#__PURE__*/React.createElement(TiDeleteOutline,null),\" \")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"mt-3\"},\" \",file.realName,\" \")));})),rejectedFiles.length>0?/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h5\",color:\"error\"},\" Fichier non acc\\xE9pter ils ne seront pas enregistrer sur le serveur \")):null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center mt-4 \"},rejectedFiles.map(function(rejectedFile,index){return/*#__PURE__*/React.createElement(Col,{className:\"\",lg:\"6\",md:\"12\",xs:\"12\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"rejected-img-container\"},/*#__PURE__*/React.createElement(\"img\",{src:FileRejectedIcon,alt:\"fichier rejeter\",className:\"img-fluid\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},rejectedFile.errors.map(function(err,ind){return/*#__PURE__*/React.createElement(\"div\",{key:ind},err.code===\"file-invalid-type\"?/*#__PURE__*/React.createElement(Typography,{color:\"error\"},\" Ce fichier \",/*#__PURE__*/React.createElement(\"span\",{className:\"type-file-span\"},\" \",rejectedFile.file.realName,\" \"),\" est de type \",/*#__PURE__*/React.createElement(\"span\",{className:\"type-file-span\"},\" \",rejectedFile.file.fileType,\" \"),\" . Seulement les images \",/*#__PURE__*/React.createElement(\"span\",{className:\"type-file-span\"},\"png, jpg et jpeg et document pdf  \"),\"  sont acc\\xE9pter \"):\"\");}))));})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Collapse,{in:etatRequest.donneIncorecte},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Alert,{variant:\"danger\"},\"Un ou plusieur document n'a pas pus enregistrer\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Collapse,{in:etatRequest.success},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Alert,{variant:\"success\"},\"Les document sont enregistrer avec succ\\xE9s\")))),/*#__PURE__*/React.createElement(Row,{className:\"align-items-center justify-content-around mt-4 \"},/*#__PURE__*/React.createElement(SubmitButton,{disabled:files.length<=0,sending:etatRequest.sending,successRequest:etatRequest.success,type:\"submit\",color:\"primary\"},\" Enregistrer \"))));}","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","Row","Col","Collapse","Alert","SubmitButton","useDropzone","useAuth","Config","Typography","FileRejectedIcon","uploadDocuments","deleteDocument","AcceptedFile","TiDeleteOutline","ReactFancyBox","baseStyle","flex","display","flexDirection","alignItems","padding","cursor","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","color","outline","transition","activeStyle","acceptStyle","rejectStyle","Images","props","UserData","success","sending","donneIncorrect","etatRequest","setEtatRequest","files","setFiles","rejectedFiles","setRejectedFiles","savedPictures","setSavedPictures","canceledPictures","setCanceledPictures","documents","socket","on","response","consultationId","consultation","id","oldPic","uploadedFiles","removeAllListeners","handleSubmit","e","preventDefault","oldData","token","uploadingFile","error","length","oldFile","canceledData","map","dd","index","emit","selectedUser","patient","deleteImageHandle","file","fetch","BACKEND_URL","method","body","JSON","stringify","path","headers","json","then","findIndex","fl","oldFiles","clone","splice","catch","removeImageHandle","onDrop","acceptedFiles","rejectedFile","type","split","reader","FileReader","readAsDataURL","onloadend","newFile","filePath","result","realName","name","fileType","existing","errors","forEach","kind","accept","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","style","active","className","err","ind","code","donneIncorecte"],"sources":["C:/app/doctolive_code/pro-doctolive/src/components/Documents/DocumentsC.js"],"sourcesContent":["import React,{useState,useMemo, useEffect, useCallback} from 'react'\r\n\r\nimport {Row, Col, Collapse, Alert} from 'react-bootstrap'\r\n\r\nimport  SubmitButton  from 'components/CustomButtons/SubmitButton.js';\r\n\r\n// import AddIcon from '@material-ui/icons/Add';\r\n\r\nimport {useDropzone} from 'react-dropzone'\r\n\r\nimport { useAuth } from \"context/Auth\";\r\nimport Config from 'Config'\r\nimport {Typography} from '@material-ui/core'\r\n\r\n\r\nimport FileRejectedIcon from 'assets/img/file-rejected.png'\r\n\r\nimport {uploadDocuments, deleteDocument} from 'services/uploads/uploadsImages'\r\n\r\nimport AcceptedFile from 'assets/img/fileaccepted.png'\r\nimport {TiDeleteOutline} from 'react-icons/ti'\r\n\r\nimport ReactFancyBox from 'react-fancybox'\r\nconst baseStyle = {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: '40px 20px',\r\n    cursor: 'pointer',\r\n    borderWidth: 2,\r\n    borderRadius: 2,\r\n    borderColor: '#eeeeee',\r\n    borderStyle: 'dashed',\r\n    backgroundColor: '#fafafa',\r\n    color: '#bdbdbd',\r\n    outline: 'none',\r\n    transition: 'border .24s ease-in-out'\r\n  };\r\n  \r\n  const activeStyle = {\r\n    borderColor: '#2196f3'\r\n  };\r\n  \r\n  const acceptStyle = {\r\n    borderColor: '#00e676'\r\n  };\r\n  \r\n  const rejectStyle = {\r\n    borderColor: '#ff1744'\r\n  };\r\n\r\n  \r\nexport default function Images(props) {\r\n    const {UserData} = useAuth();\r\n\r\n    const [etatRequest, setEtatRequest] = useState({success: false, sending:false, donneIncorrect: false});\r\n    const [files, setFiles] = useState([])\r\n    const [rejectedFiles, setRejectedFiles] = useState([]);\r\n    const [savedPictures, setSavedPictures] = useState([]);\r\n    const [canceledPictures, setCanceledPictures] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if(props.documents){\r\n            setSavedPictures(props.documents)  \r\n        }\r\n              \r\n        return () => {\r\n            \r\n        }\r\n    }, [props.documents])\r\n\r\n    useEffect(() => {\r\n        if(props.socket){\r\n            props.socket.on('newDocuments', (response)=> { \r\n                if(response.consultationId === props.consultation.id){\r\n                    setSavedPictures( oldPic => [...oldPic, ...response.uploadedFiles]);\r\n                }\r\n            });  \r\n\r\n        }\r\n       \r\n              \r\n        return () => {\r\n            if(props.socket){\r\n                props.socket.removeAllListeners('newDocuments')\r\n            }\r\n        }\r\n    }, [props.socket])\r\n\r\n    const handleSubmit = async (e) =>{\r\n        e.preventDefault();\r\n        setEtatRequest(oldData => {return {...oldData, sending:true}});\r\n\r\n        let uploadingFile = await uploadDocuments(files, UserData.token, props.consultation );\r\n\r\n        if(!uploadingFile){\r\n            setEtatRequest(oldData => {return {...oldData, sending:false, success:false, donneIncorrect: true}}); \r\n        } else if(!uploadingFile.error){\r\n            setEtatRequest(oldData => {return {...oldData, sending:false, success:true}});\r\n\r\n            if(uploadingFile.savedPictures.length> 0){\r\n                setSavedPictures(oldFile => [...oldFile, ...uploadingFile.savedPictures])\r\n            }\r\n            if (uploadingFile.canceledData.length > 0) {\r\n                uploadingFile.canceledData.map((dd) => {\r\n                    setCanceledPictures(oldData => [...oldData, files[dd.index]]);\r\n                })                \r\n                setFiles([])\r\n                setRejectedFiles([])\r\n            }else {\r\n                setFiles([])\r\n                setRejectedFiles([])\r\n            }\r\n            props.socket.emit('newDocuments', { uploadedFiles: uploadingFile.savedPictures , consultationId: props.consultation.id, selectedUser:  \"p\" + props.consultation.patient.id}, (response)=> { });  \r\n        }else {\r\n            setEtatRequest(oldData => {return {...oldData, sending:false, success:false, donneIncorrect: true}});\r\n        }\r\n    }\r\n\r\n    const deleteImageHandle = async (file) => {\r\n\r\n        let response = await fetch(`${Config.BACKEND_URL}/upload/document`, {\r\n            method: 'DELETE',\r\n            body: JSON.stringify({path: file.path, id: file.id}),\r\n            headers: {\r\n              'Accept': 'application/json', \r\n              'Content-Type': 'application/json',\r\n              'Authorization': `token ${UserData.token}`,\r\n            },\r\n        });\r\n\r\n        response.json()\r\n        .then(response => {\r\n            let index = savedPictures.findIndex(fl => fl.id === file.id);\r\n\r\n            setSavedPictures(oldFiles => {\r\n                let clone = [...oldFiles]\r\n                clone.splice(index, 1);\r\n                return (clone)\r\n            })\r\n        })\r\n        .catch(error => {\r\n\r\n            \r\n        })\r\n    }\r\n\r\n    const removeImageHandle =  (file) => {\r\n        let index = files.findIndex(fl => fl.id === file.id);\r\n\r\n        setFiles(oldFiles => {\r\n            let clone = [...oldFiles]\r\n            clone.splice(index, 1);\r\n            return (clone)\r\n        })\r\n      \r\n    }\r\n\r\n    const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\r\n        rejectedFiles.map(rejectedFile => {\r\n            if(rejectedFile.file.type.split('/')[0] === \"image\"){\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(rejectedFile.file);\r\n                reader.onloadend = () => {                    \r\n                    let newFile =  {filePath: reader.result, realName: rejectedFile.file.name, type: 'file', fileType: rejectedFile.file.type.split('/')[0]  }\r\n                    setRejectedFiles(existing => [...existing, {file: newFile, errors: rejectedFile.errors}])          \r\n                }\r\n            }else{\r\n                let newFile =  { realName: rejectedFile.file.name, type: 'file', fileType: rejectedFile.file.type.split('/')[0]  }\r\n                setRejectedFiles(existing => [...existing, {file: newFile, errors: rejectedFile.errors}])\r\n\r\n            }\r\n        })\r\n\r\n        acceptedFiles.forEach((file) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onloadend = () => {    \r\n                let newFile =  {filePath: reader.result, realName: file.name, type: 'file', fileType: \"image\", kind: file.type  }\r\n                setFiles(existing => [...existing, newFile])          \r\n            }\r\n        })      \r\n    }, [])\r\n\r\n    const { getRootProps,\r\n        getInputProps,\r\n        isDragActive,\r\n        isDragAccept,\r\n        isDragReject\r\n    } = useDropzone({onDrop, accept: 'image/jpeg, image/png, image/jpg, application/pdf'})\r\n\r\n    const style = useMemo(() => ({\r\n        ...baseStyle,\r\n        ...(isDragActive ? activeStyle : {}),\r\n        ...(isDragAccept ? acceptStyle : {}),\r\n        ...(isDragReject ? rejectStyle : {})\r\n      }), [\r\n        isDragActive,\r\n        isDragReject,\r\n        isDragAccept\r\n      ]);\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} autoComplete=\"off\">\r\n            \r\n                <Col>\r\n                    {   savedPictures.length > 0 ?\r\n                        <Row className=\"mb-3\">\r\n                            <Typography variant=\"h5\" component=\"h5\" > Documents déjà partager dans cette consultation </Typography>\r\n                        </Row>\r\n                        : null\r\n                    }\r\n                    {\r\n                        savedPictures.length > 0 ?\r\n                        <Row className=\"images-saved\">\r\n                            { savedPictures.map((file, index) => {\r\n                                return (\r\n                                    <Col className=\"mt-5\" lg=\"2\" md=\"4\" xs=\"6\" key={index}>\r\n                                        <div className=\"image-saved\">\r\n                                            {file.type === \"application/pdf\" ?\r\n                                            <a href={Config.BACKEND_URL + file.path} download={file.name} target=\"_blank\" rel=\"noopener noreferrer\">  <img src={AcceptedFile} alt=\"...\" className=\"img-fluid\" /> </a>\r\n                                            :\r\n                                            <ReactFancyBox\r\n                                                thumbnail={`${Config.BACKEND_URL}${file.path}`}\r\n                                                showCloseBtn={true}\r\n                                                className=\"img-fluid\"\r\n                                                image={`${Config.BACKEND_URL}${file.path}`}/>\r\n                                            }\r\n                                            <span onClick={() => deleteImageHandle(file)} className=\"delete-button\"> <TiDeleteOutline /> </span>                                            \r\n                                            {/* <img src={file.type === \"application/pdf\" ? AcceptedFile :`${Config.BACKEND_URL}${file.path}`} alt=\"...\" className=\"img-fluid\" />\r\n                                            <span onClick={() => deleteImageHandle(file)} className=\"delete-button\"> <TiDeleteOutline /> </span> */}\r\n                                        </div>\r\n                                    </Col>\r\n                                )\r\n                            })}\r\n                        </Row>\r\n                        : null\r\n                    }\r\n                    {\r\n                        props.consultation?.active ?\r\n                        <Row className=\"align-items-center justify-content-around mt-4 \">\r\n                        <div {...getRootProps({style, className:\"dropzone\"})}>\r\n                                <input {...getInputProps()} />\r\n                                <p>Glisser déposer des fichiers ici ou</p> <h4> PARCOURIR SUR MON ORDINATEUR </h4>\r\n                            </div>\r\n                        </Row>\r\n                        : \r\n                        <Row className=\"align-items-center justify-content-around mt-4 \">\r\n                        <div className=\"dropzone\">\r\n                                \r\n                                <p> Cette consultation est términer vous pouvez plus envoyer des documents </p>\r\n                            </div>\r\n                        </Row>\r\n                    }   \r\n                    \r\n                    \r\n\r\n                    {   canceledPictures.length > 0 ?\r\n                        <Row className=\"mt-5\">\r\n                            <Typography variant=\"h5\" component=\"h5\" color=\"error\"> Ces images n'on pas pus s'enregistrer au sein de nos serveur. essayer ultériérement où bien essayer d'autre images </Typography>\r\n                        </Row>\r\n                        : null\r\n                    }\r\n                    {\r\n                        canceledPictures.length > 0 ?\r\n                        <Row className=\"images-canceled\">\r\n                            { canceledPictures.map((file, index) => {\r\n                                    return (\r\n                                        <Col className=\"mt-5\" lg=\"2\" md=\"4\" xs=\"6\" key={index}>\r\n                                            <div className=\"image-canceled\">\r\n                                                <img src={file.filePath} alt={file.realName} className=\"img-fluid\" />\r\n                                            </div>\r\n                                            <div>\r\n                                            <Typography color=\"error\" > Le serveur n'a pas pus suporter ces fichier </Typography>\r\n                                            </div>\r\n                                        </Col>\r\n                                    )\r\n                            })\r\n                            }\r\n                        </Row>\r\n                        : null\r\n                    }\r\n                    <Row className=\"align-items-center justify-content-around mt-4 \">\r\n                        {\r\n                           files.map((file, index) => {\r\n                                return (\r\n                                   <Col className=\"mt-5\" lg=\"6\" md=\"6\" xs=\"6\" key={index}>\r\n                                       <div className=\"selecting-img-container\">\r\n                                           <img src={ file.kind === \"application/pdf\" ? AcceptedFile : file.filePath } alt={file.realName} className=\"img-fluid\" />\r\n                                           <span onClick={() => removeImageHandle(file)} className=\"delete-button\"> <TiDeleteOutline /> </span>\r\n                                       </div>\r\n                                       <div>\r\n                                           <p className=\"mt-3\"> {file.realName} </p>\r\n                                       </div>\r\n                                   </Col>\r\n                                )\r\n                           })\r\n                        }\r\n                    </Row>\r\n\r\n                    \r\n\r\n                    {   rejectedFiles.length > 0 ?\r\n                        <Row className=\"mt-5\">\r\n                            <Typography variant=\"h5\" component=\"h5\" color=\"error\" > Fichier non accépter ils ne seront pas enregistrer sur le serveur </Typography>\r\n                        </Row>\r\n                        : null\r\n                    }\r\n                    <Row className=\"align-items-center mt-4 \">\r\n                        {\r\n                           rejectedFiles.map((rejectedFile, index) => {\r\n                                return (\r\n                                   <Col className=\"\" lg=\"6\" md=\"12\" xs=\"12\" key={index}>\r\n                                       <div className=\"rejected-img-container\">\r\n                                           <img src={FileRejectedIcon} alt={\"fichier rejeter\"} className=\"img-fluid\" />\r\n                                       </div>\r\n                                       <div>\r\n                                           <div className=\"mt-3\"> \r\n                                            { rejectedFile.errors.map((err, ind) => {\r\n                                               return(\r\n                                                <div key={ind}>\r\n                                                    {err.code===\"file-invalid-type\" ? <Typography color=\"error\" > Ce fichier <span className=\"type-file-span\"> {rejectedFile.file.realName} </span> est de type <span className=\"type-file-span\"> {rejectedFile.file.fileType} </span> . Seulement les images <span className=\"type-file-span\">png, jpg et jpeg et document pdf  </span>  sont accépter </Typography> : \"\"}\r\n                                                </div>\r\n                                               )\r\n                                            })} \r\n                                           </div>\r\n                                       </div>\r\n                                   </Col>\r\n                                )\r\n                           })\r\n                        }\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Collapse in={ etatRequest.donneIncorecte}>\r\n                            <div>\r\n                                <Alert  variant=\"danger\">\r\n                                    Un ou plusieur document n'a pas pus enregistrer\r\n                                </Alert>\r\n                            </div>\r\n                        </Collapse>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Collapse in={etatRequest.success}>\r\n                            <div >\r\n                                <Alert  variant=\"success\">\r\n                                    Les document sont enregistrer avec succés\r\n                                </Alert>\r\n                            </div>\r\n                        </Collapse>\r\n                    </Row>\r\n\r\n                    <Row className=\"align-items-center justify-content-around mt-4 \">\r\n                        <SubmitButton disabled={files.length <= 0} sending={etatRequest.sending} successRequest={etatRequest.success} type=\"submit\" color=\"primary\"> Enregistrer </SubmitButton>\r\n                    </Row>\r\n                </Col>\r\n                \r\n            </form>\r\n    )\r\n}\r\n\r\n"],"mappings":"isBACA,oJ,unUADA,MAAOA,MAAP,EAAcC,QAAd,CAAuBC,OAAvB,CAAgCC,SAAhC,CAA2CC,WAA3C,KAA6D,OAA7D,CAEA,OAAQC,GAAR,CAAaC,GAAb,CAAkBC,QAAlB,CAA4BC,KAA5B,KAAwC,iBAAxC,CAEA,MAAQC,aAAR,KAA2B,0CAA3B,CAEA;AAEA,OAAQC,WAAR,KAA0B,gBAA1B,CAEA,OAASC,OAAT,KAAwB,cAAxB,CACA,MAAOC,OAAP,KAAmB,QAAnB,CACA,OAAQC,UAAR,KAAyB,mBAAzB,CAGA,MAAOC,iBAAP,KAA6B,8BAA7B,CAEA,OAAQC,eAAR,CAAyBC,cAAzB,KAA8C,gCAA9C,CAEA,MAAOC,aAAP,KAAyB,6BAAzB,CACA,OAAQC,eAAR,KAA8B,gBAA9B,CAEA,MAAOC,cAAP,KAA0B,gBAA1B,CACA,GAAMC,UAAS,CAAG,CACdC,IAAI,CAAE,CADQ,CAEdC,OAAO,CAAE,MAFK,CAGdC,aAAa,CAAE,QAHD,CAIdC,UAAU,CAAE,QAJE,CAKdC,OAAO,CAAE,WALK,CAMdC,MAAM,CAAE,SANM,CAOdC,WAAW,CAAE,CAPC,CAQdC,YAAY,CAAE,CARA,CASdC,WAAW,CAAE,SATC,CAUdC,WAAW,CAAE,QAVC,CAWdC,eAAe,CAAE,SAXH,CAYdC,KAAK,CAAE,SAZO,CAadC,OAAO,CAAE,MAbK,CAcdC,UAAU,CAAE,yBAdE,CAAlB,CAiBE,GAAMC,YAAW,CAAG,CAClBN,WAAW,CAAE,SADK,CAApB,CAIA,GAAMO,YAAW,CAAG,CAClBP,WAAW,CAAE,SADK,CAApB,CAIA,GAAMQ,YAAW,CAAG,CAClBR,WAAW,CAAE,SADK,CAApB,CAKF,cAAe,SAASS,OAAT,CAAgBC,KAAhB,CAAuB,yBAClC,aAAmB5B,OAAO,EAA1B,CAAO6B,QAAP,UAAOA,QAAP,CAEA,cAAsCvC,QAAQ,CAAC,CAACwC,OAAO,CAAE,KAAV,CAAiBC,OAAO,CAAC,KAAzB,CAAgCC,cAAc,CAAE,KAAhD,CAAD,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eACA,eAA0B5C,QAAQ,CAAC,EAAD,CAAlC,yCAAO6C,KAAP,eAAcC,QAAd,eACA,eAA0C9C,QAAQ,CAAC,EAAD,CAAlD,yCAAO+C,aAAP,eAAsBC,gBAAtB,eACA,eAA0ChD,QAAQ,CAAC,EAAD,CAAlD,yCAAOiD,aAAP,eAAsBC,gBAAtB,eACA,eAAgDlD,QAAQ,CAAC,EAAD,CAAxD,0CAAOmD,gBAAP,gBAAyBC,mBAAzB,gBAEAlD,SAAS,CAAC,UAAM,CACZ,GAAGoC,KAAK,CAACe,SAAT,CAAmB,CACfH,gBAAgB,CAACZ,KAAK,CAACe,SAAP,CAAhB,CACH,CAED,MAAO,WAAM,CAEZ,CAFD,CAGH,CARQ,CAQN,CAACf,KAAK,CAACe,SAAP,CARM,CAAT,CAUAnD,SAAS,CAAC,UAAM,CACZ,GAAGoC,KAAK,CAACgB,MAAT,CAAgB,CACZhB,KAAK,CAACgB,MAAN,CAAaC,EAAb,CAAgB,cAAhB,CAAgC,SAACC,QAAD,CAAa,CACzC,GAAGA,QAAQ,CAACC,cAAT,GAA4BnB,KAAK,CAACoB,YAAN,CAAmBC,EAAlD,CAAqD,CACjDT,gBAAgB,CAAE,SAAAU,MAAM,qCAAQA,MAAR,qBAAmBJ,QAAQ,CAACK,aAA5B,IAAR,CAAhB,CACH,CACJ,CAJD,EAMH,CAGD,MAAO,WAAM,CACT,GAAGvB,KAAK,CAACgB,MAAT,CAAgB,CACZhB,KAAK,CAACgB,MAAN,CAAaQ,kBAAb,CAAgC,cAAhC,EACH,CACJ,CAJD,CAKH,CAhBQ,CAgBN,CAACxB,KAAK,CAACgB,MAAP,CAhBM,CAAT,CAkBA,GAAMS,aAAY,4FAAG,iBAAOC,CAAP,sIACjBA,CAAC,CAACC,cAAF,GACArB,cAAc,CAAC,SAAAsB,OAAO,CAAI,CAAC,sCAAWA,OAAX,MAAoBzB,OAAO,CAAC,IAA5B,GAAkC,CAA/C,CAAd,CAFiB,sBAIS3B,gBAAe,CAAC+B,KAAD,CAAQN,QAAQ,CAAC4B,KAAjB,CAAwB7B,KAAK,CAACoB,YAA9B,CAJxB,QAIbU,aAJa,eAMjB,GAAG,CAACA,aAAJ,CAAkB,CACdxB,cAAc,CAAC,SAAAsB,OAAO,CAAI,CAAC,sCAAWA,OAAX,MAAoBzB,OAAO,CAAC,KAA5B,CAAmCD,OAAO,CAAC,KAA3C,CAAkDE,cAAc,CAAE,IAAlE,GAAwE,CAArF,CAAd,CACH,CAFD,IAEO,IAAG,CAAC0B,aAAa,CAACC,KAAlB,CAAwB,CAC3BzB,cAAc,CAAC,SAAAsB,OAAO,CAAI,CAAC,sCAAWA,OAAX,MAAoBzB,OAAO,CAAC,KAA5B,CAAmCD,OAAO,CAAC,IAA3C,GAAiD,CAA9D,CAAd,CAEA,GAAG4B,aAAa,CAACnB,aAAd,CAA4BqB,MAA5B,CAAoC,CAAvC,CAAyC,CACrCpB,gBAAgB,CAAC,SAAAqB,OAAO,qCAAQA,OAAR,qBAAoBH,aAAa,CAACnB,aAAlC,IAAR,CAAhB,CACH,CACD,GAAImB,aAAa,CAACI,YAAd,CAA2BF,MAA3B,CAAoC,CAAxC,CAA2C,CACvCF,aAAa,CAACI,YAAd,CAA2BC,GAA3B,CAA+B,SAACC,EAAD,CAAQ,CACnCtB,mBAAmB,CAAC,SAAAc,OAAO,qCAAQA,OAAR,GAAiBrB,KAAK,CAAC6B,EAAE,CAACC,KAAJ,CAAtB,IAAR,CAAnB,CACH,CAFD,EAGA7B,QAAQ,CAAC,EAAD,CAAR,CACAE,gBAAgB,CAAC,EAAD,CAAhB,CACH,CAND,IAMM,CACFF,QAAQ,CAAC,EAAD,CAAR,CACAE,gBAAgB,CAAC,EAAD,CAAhB,CACH,CACDV,KAAK,CAACgB,MAAN,CAAasB,IAAb,CAAkB,cAAlB,CAAkC,CAAEf,aAAa,CAAEO,aAAa,CAACnB,aAA/B,CAA+CQ,cAAc,CAAEnB,KAAK,CAACoB,YAAN,CAAmBC,EAAlF,CAAsFkB,YAAY,CAAG,IAAMvC,KAAK,CAACoB,YAAN,CAAmBoB,OAAnB,CAA2BnB,EAAtI,CAAlC,CAA6K,SAACH,QAAD,CAAa,CAAG,CAA7L,EACH,CAjBM,IAiBD,CACFZ,cAAc,CAAC,SAAAsB,OAAO,CAAI,CAAC,sCAAWA,OAAX,MAAoBzB,OAAO,CAAC,KAA5B,CAAmCD,OAAO,CAAC,KAA3C,CAAkDE,cAAc,CAAE,IAAlE,GAAwE,CAArF,CAAd,CACH,CA3BgB,sDAAH,kBAAZqB,aAAY,4CAAlB,CA8BA,GAAMgB,kBAAiB,6FAAG,kBAAOC,IAAP,4JAEDC,MAAK,WAAItE,MAAM,CAACuE,WAAX,qBAA0C,CAChEC,MAAM,CAAE,QADwD,CAEhEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,IAAI,CAAEP,IAAI,CAACO,IAAZ,CAAkB5B,EAAE,CAAEqB,IAAI,CAACrB,EAA3B,CAAf,CAF0D,CAGhE6B,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAGP,gCAA0BjD,QAAQ,CAAC4B,KAAnC,CAHO,CAHuD,CAA1C,CAFJ,QAElBX,QAFkB,gBAYtBA,QAAQ,CAACiC,IAAT,GACCC,IADD,CACM,SAAAlC,QAAQ,CAAI,CACd,GAAImB,MAAK,CAAG1B,aAAa,CAAC0C,SAAd,CAAwB,SAAAC,EAAE,QAAIA,GAAE,CAACjC,EAAH,GAAUqB,IAAI,CAACrB,EAAnB,EAA1B,CAAZ,CAEAT,gBAAgB,CAAC,SAAA2C,QAAQ,CAAI,CACzB,GAAIC,MAAK,oBAAOD,QAAP,CAAT,CACAC,KAAK,CAACC,MAAN,CAAapB,KAAb,CAAoB,CAApB,EACA,MAAQmB,MAAR,CACH,CAJe,CAAhB,CAKH,CATD,EAUCE,KAVD,CAUO,SAAA3B,KAAK,CAAI,CAGf,CAbD,EAZsB,wDAAH,kBAAjBU,kBAAiB,8CAAvB,CA4BA,GAAMkB,kBAAiB,CAAI,QAArBA,kBAAqB,CAACjB,IAAD,CAAU,CACjC,GAAIL,MAAK,CAAG9B,KAAK,CAAC8C,SAAN,CAAgB,SAAAC,EAAE,QAAIA,GAAE,CAACjC,EAAH,GAAUqB,IAAI,CAACrB,EAAnB,EAAlB,CAAZ,CAEAb,QAAQ,CAAC,SAAA+C,QAAQ,CAAI,CACjB,GAAIC,MAAK,oBAAOD,QAAP,CAAT,CACAC,KAAK,CAACC,MAAN,CAAapB,KAAb,CAAoB,CAApB,EACA,MAAQmB,MAAR,CACH,CAJO,CAAR,CAMH,CATD,CAWA,GAAMI,OAAM,CAAG/F,WAAW,CAAC,SAACgG,aAAD,CAAgBpD,aAAhB,CAAkC,CACzDA,aAAa,CAAC0B,GAAd,CAAkB,SAAA2B,YAAY,CAAI,CAC9B,GAAGA,YAAY,CAACpB,IAAb,CAAkBqB,IAAlB,CAAuBC,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,IAAyC,OAA5C,CAAoD,CAChD,GAAMC,OAAM,CAAG,GAAIC,WAAJ,EAAf,CACAD,MAAM,CAACE,aAAP,CAAqBL,YAAY,CAACpB,IAAlC,EACAuB,MAAM,CAACG,SAAP,CAAmB,UAAM,CACrB,GAAIC,QAAO,CAAI,CAACC,QAAQ,CAAEL,MAAM,CAACM,MAAlB,CAA0BC,QAAQ,CAAEV,YAAY,CAACpB,IAAb,CAAkB+B,IAAtD,CAA4DV,IAAI,CAAE,MAAlE,CAA0EW,QAAQ,CAAEZ,YAAY,CAACpB,IAAb,CAAkBqB,IAAlB,CAAuBC,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAApF,CAAf,CACAtD,gBAAgB,CAAC,SAAAiE,QAAQ,qCAAQA,QAAR,GAAkB,CAACjC,IAAI,CAAE2B,OAAP,CAAgBO,MAAM,CAAEd,YAAY,CAACc,MAArC,CAAlB,IAAT,CAAhB,CACH,CAHD,CAIH,CAPD,IAOK,CACD,GAAIP,QAAO,CAAI,CAAEG,QAAQ,CAAEV,YAAY,CAACpB,IAAb,CAAkB+B,IAA9B,CAAoCV,IAAI,CAAE,MAA1C,CAAkDW,QAAQ,CAAEZ,YAAY,CAACpB,IAAb,CAAkBqB,IAAlB,CAAuBC,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAA5D,CAAf,CACAtD,gBAAgB,CAAC,SAAAiE,QAAQ,qCAAQA,QAAR,GAAkB,CAACjC,IAAI,CAAE2B,OAAP,CAAgBO,MAAM,CAAEd,YAAY,CAACc,MAArC,CAAlB,IAAT,CAAhB,CAEH,CACJ,CAbD,EAeAf,aAAa,CAACgB,OAAd,CAAsB,SAACnC,IAAD,CAAU,CAC5B,GAAMuB,OAAM,CAAG,GAAIC,WAAJ,EAAf,CACAD,MAAM,CAACE,aAAP,CAAqBzB,IAArB,EACAuB,MAAM,CAACG,SAAP,CAAmB,UAAM,CACrB,GAAIC,QAAO,CAAI,CAACC,QAAQ,CAAEL,MAAM,CAACM,MAAlB,CAA0BC,QAAQ,CAAE9B,IAAI,CAAC+B,IAAzC,CAA+CV,IAAI,CAAE,MAArD,CAA6DW,QAAQ,CAAE,OAAvE,CAAgFI,IAAI,CAAEpC,IAAI,CAACqB,IAA3F,CAAf,CACAvD,QAAQ,CAAC,SAAAmE,QAAQ,qCAAQA,QAAR,GAAkBN,OAAlB,IAAT,CAAR,CACH,CAHD,CAIH,CAPD,EAQH,CAxByB,CAwBvB,EAxBuB,CAA1B,CA0BA,iBAKIlG,WAAW,CAAC,CAACyF,MAAM,CAANA,MAAD,CAASmB,MAAM,CAAE,mDAAjB,CAAD,CALf,CAAQC,YAAR,cAAQA,YAAR,CACIC,aADJ,cACIA,aADJ,CAEIC,YAFJ,cAEIA,YAFJ,CAGIC,YAHJ,cAGIA,YAHJ,CAIIC,YAJJ,cAIIA,YAJJ,CAOA,GAAMC,MAAK,CAAG1H,OAAO,CAAC,6EACfkB,SADe,EAEdqG,YAAY,CAAGtF,WAAH,CAAiB,EAFf,EAGduF,YAAY,CAAGtF,WAAH,CAAiB,EAHf,EAIduF,YAAY,CAAGtF,WAAH,CAAiB,EAJf,GAAD,CAKf,CACFoF,YADE,CAEFE,YAFE,CAGFD,YAHE,CALe,CAArB,CAWA,mBACI,4BAAM,QAAQ,CAAE1D,YAAhB,CAA8B,YAAY,CAAC,KAA3C,eAEQ,oBAAC,GAAD,MACQd,aAAa,CAACqB,MAAd,CAAuB,CAAvB,cACA,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACI,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAC,IAAnC,4DADJ,CADA,CAIE,IALV,CAQQrB,aAAa,CAACqB,MAAd,CAAuB,CAAvB,cACA,oBAAC,GAAD,EAAK,SAAS,CAAC,cAAf,EACMrB,aAAa,CAACwB,GAAd,CAAkB,SAACO,IAAD,CAAOL,KAAP,CAAiB,CACjC,mBACI,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,CAAsB,EAAE,CAAC,GAAzB,CAA6B,EAAE,CAAC,GAAhC,CAAoC,EAAE,CAAC,GAAvC,CAA2C,GAAG,CAAEA,KAAhD,eACI,2BAAK,SAAS,CAAC,aAAf,EACKK,IAAI,CAACqB,IAAL,GAAc,iBAAd,cACD,yBAAG,IAAI,CAAE1F,MAAM,CAACuE,WAAP,CAAqBF,IAAI,CAACO,IAAnC,CAAyC,QAAQ,CAAEP,IAAI,CAAC+B,IAAxD,CAA8D,MAAM,CAAC,QAArE,CAA8E,GAAG,CAAC,qBAAlF,oBAA0G,2BAAK,GAAG,CAAE/F,YAAV,CAAwB,GAAG,CAAC,KAA5B,CAAkC,SAAS,CAAC,WAA5C,EAA1G,KADC,cAGD,oBAAC,aAAD,EACI,SAAS,WAAKL,MAAM,CAACuE,WAAZ,SAA0BF,IAAI,CAACO,IAA/B,CADb,CAEI,YAAY,CAAE,IAFlB,CAGI,SAAS,CAAC,WAHd,CAII,KAAK,WAAK5E,MAAM,CAACuE,WAAZ,SAA0BF,IAAI,CAACO,IAA/B,CAJT,EAJJ,cAUI,4BAAM,OAAO,CAAE,yBAAMR,kBAAiB,CAACC,IAAD,CAAvB,EAAf,CAA8C,SAAS,CAAC,eAAxD,mBAAyE,oBAAC,eAAD,MAAzE,KAVJ,CADJ,CADJ,CAkBH,CAnBC,CADN,CADA,CAuBE,IA/BV,CAkCQ,sBAAA1C,KAAK,CAACoB,YAAN,kEAAoBkE,MAApB,eACA,oBAAC,GAAD,EAAK,SAAS,CAAC,iDAAf,eACA,0BAASN,YAAY,CAAC,CAACK,KAAK,CAALA,KAAD,CAAQE,SAAS,CAAC,UAAlB,CAAD,CAArB,cACQ,4BAAWN,aAAa,EAAxB,CADR,cAEQ,sEAFR,kBAEmD,+DAFnD,CADA,CADA,cAQA,oBAAC,GAAD,EAAK,SAAS,CAAC,iDAAf,eACA,2BAAK,SAAS,CAAC,UAAf,eAEQ,2GAFR,CADA,CA1CR,CAoDQpE,gBAAgB,CAACmB,MAAjB,CAA0B,CAA1B,cACA,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACI,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAC,IAAnC,CAAwC,KAAK,CAAC,OAA9C,kIADJ,CADA,CAIE,IAxDV,CA2DQnB,gBAAgB,CAACmB,MAAjB,CAA0B,CAA1B,cACA,oBAAC,GAAD,EAAK,SAAS,CAAC,iBAAf,EACMnB,gBAAgB,CAACsB,GAAjB,CAAqB,SAACO,IAAD,CAAOL,KAAP,CAAiB,CAChC,mBACI,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,CAAsB,EAAE,CAAC,GAAzB,CAA6B,EAAE,CAAC,GAAhC,CAAoC,EAAE,CAAC,GAAvC,CAA2C,GAAG,CAAEA,KAAhD,eACI,2BAAK,SAAS,CAAC,gBAAf,eACI,2BAAK,GAAG,CAAEK,IAAI,CAAC4B,QAAf,CAAyB,GAAG,CAAE5B,IAAI,CAAC8B,QAAnC,CAA6C,SAAS,CAAC,WAAvD,EADJ,CADJ,cAII,4CACA,oBAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,kDADA,CAJJ,CADJ,CAUP,CAXC,CADN,CADA,CAgBE,IA3EV,cA6EI,oBAAC,GAAD,EAAK,SAAS,CAAC,iDAAf,EAEOjE,KAAK,CAAC4B,GAAN,CAAU,SAACO,IAAD,CAAOL,KAAP,CAAiB,CACtB,mBACG,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,CAAsB,EAAE,CAAC,GAAzB,CAA6B,EAAE,CAAC,GAAhC,CAAoC,EAAE,CAAC,GAAvC,CAA2C,GAAG,CAAEA,KAAhD,eACI,2BAAK,SAAS,CAAC,yBAAf,eACI,2BAAK,GAAG,CAAGK,IAAI,CAACoC,IAAL,GAAc,iBAAd,CAAkCpG,YAAlC,CAAiDgE,IAAI,CAAC4B,QAAjE,CAA4E,GAAG,CAAE5B,IAAI,CAAC8B,QAAtF,CAAgG,SAAS,CAAC,WAA1G,EADJ,cAEI,4BAAM,OAAO,CAAE,yBAAMb,kBAAiB,CAACjB,IAAD,CAAvB,EAAf,CAA8C,SAAS,CAAC,eAAxD,mBAAyE,oBAAC,eAAD,MAAzE,KAFJ,CADJ,cAKI,4CACI,yBAAG,SAAS,CAAC,MAAb,MAAsBA,IAAI,CAAC8B,QAA3B,KADJ,CALJ,CADH,CAWJ,CAZD,CAFP,CA7EJ,CAiGQ/D,aAAa,CAACuB,MAAd,CAAuB,CAAvB,cACA,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACI,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAC,IAAnC,CAAwC,KAAK,CAAC,OAA9C,2EADJ,CADA,CAIE,IArGV,cAuGI,oBAAC,GAAD,EAAK,SAAS,CAAC,0BAAf,EAEOvB,aAAa,CAAC0B,GAAd,CAAkB,SAAC2B,YAAD,CAAezB,KAAf,CAAyB,CACtC,mBACG,oBAAC,GAAD,EAAK,SAAS,CAAC,EAAf,CAAkB,EAAE,CAAC,GAArB,CAAyB,EAAE,CAAC,IAA5B,CAAiC,EAAE,CAAC,IAApC,CAAyC,GAAG,CAAEA,KAA9C,eACI,2BAAK,SAAS,CAAC,wBAAf,eACI,2BAAK,GAAG,CAAE9D,gBAAV,CAA4B,GAAG,CAAE,iBAAjC,CAAoD,SAAS,CAAC,WAA9D,EADJ,CADJ,cAII,4CACI,2BAAK,SAAS,CAAC,MAAf,EACGuF,YAAY,CAACc,MAAb,CAAoBzC,GAApB,CAAwB,SAACqD,GAAD,CAAMC,GAAN,CAAc,CACrC,mBACC,2BAAK,GAAG,CAAEA,GAAV,EACKD,GAAG,CAACE,IAAJ,GAAW,mBAAX,cAAiC,oBAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,8BAAuC,4BAAM,SAAS,CAAC,gBAAhB,MAAmC5B,YAAY,CAACpB,IAAb,CAAkB8B,QAArD,KAAvC,8BAA0H,4BAAM,SAAS,CAAC,gBAAhB,MAAmCV,YAAY,CAACpB,IAAb,CAAkBgC,QAArD,KAA1H,yCAAwN,4BAAM,SAAS,CAAC,gBAAhB,uCAAxN,uBAAjC,CAAmW,EADxW,CADD,CAKF,CANC,CADH,CADJ,CAJJ,CADH,CAkBJ,CAnBD,CAFP,CAvGJ,cAgII,oBAAC,GAAD,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAGrE,WAAW,CAACsF,cAA3B,eACI,4CACI,oBAAC,KAAD,EAAQ,OAAO,CAAC,QAAhB,oDADJ,CADJ,CADJ,CAhIJ,cA0II,oBAAC,GAAD,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAEtF,WAAW,CAACH,OAA1B,eACI,4CACI,oBAAC,KAAD,EAAQ,OAAO,CAAC,SAAhB,iDADJ,CADJ,CADJ,CA1IJ,cAoJI,oBAAC,GAAD,EAAK,SAAS,CAAC,iDAAf,eACI,oBAAC,YAAD,EAAc,QAAQ,CAAEK,KAAK,CAACyB,MAAN,EAAgB,CAAxC,CAA2C,OAAO,CAAE3B,WAAW,CAACF,OAAhE,CAAyE,cAAc,CAAEE,WAAW,CAACH,OAArG,CAA8G,IAAI,CAAC,QAAnH,CAA4H,KAAK,CAAC,SAAlI,kBADJ,CApJJ,CAFR,CADJ,CA8JH"},"metadata":{},"sourceType":"module"}