_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{"3O0d":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n("nKUr"),a=n("xvhg"),i=n("q1tI"),r=n.n(i),o=n("GcSG"),s=["places"],l={height:"50vh",width:"100%"},d={styles:[{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.text",stylers:[{visibility:"off"}]}],disableDefaultUI:!0,zoomControl:!0,scrollwheel:!1};function u(e){var t=Object(o.c)({googleMapsApiKey:e.apiKey,libraries:s}),n=t.isLoaded,i=t.loadError,u=r.a.useState([]),p=Object(a.a)(u,2),j=p[0],m=p[1],b=r.a.useState({lat:33.5795703,lng:-7.5874518}),f=Object(a.a)(b,2),h=f[0],O=f[1];r.a.useEffect((function(){e.locations&&e.locations.length>0&&e.locations[0]&&(m(e.locations),O({lat:e.locations[0].latitude,lng:e.locations[0].longitude}))}),[e.locations]);var x=r.a.useRef(),y=r.a.useCallback((function(e){x.current=e}),[]);return i?"Error":n?Object(c.jsx)("div",{children:Object(c.jsx)(o.a,{id:"map",mapContainerStyle:l,zoom:8,center:h,options:d,onLoad:y,children:j.map((function(e,t){return e?Object(c.jsx)(o.b,{position:{lat:e.latitude,lng:e.longitude},animation:window.google.maps.Animation.DROP,icon:"/image/marker.png",onClick:function(){}},t):null}))})}):"Loading..."}},"6FTQ":function(e,t,n){"use strict";function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}n.d(t,"a",(function(){return c}))},"6u8J":function(e,t,n){"use strict";var c=n("wx14"),a=n("Ff2n"),i=n("q1tI"),r=(n("17x9"),n("i8i4")),o=n("l3Wi"),s=n("dRu9"),l=n("bfFb"),d=n("tr08"),u=n("wpWl"),p=n("4Hym");function j(e,t){var n=function(e,t){var n,c=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var a=window.getComputedStyle(t);n=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform")}var i=0,r=0;if(n&&"none"!==n&&"string"===typeof n){var o=n.split("(")[1].split(")")[0].split(",");i=parseInt(o[4],10),r=parseInt(o[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-c.left,"px)"):"right"===e?"translateX(-".concat(c.left+c.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(r-c.top,"px)"):"translateY(-".concat(c.top+c.height-r,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var m={enter:u.b.enteringScreen,exit:u.b.leavingScreen},b=i.forwardRef((function(e,t){var n=e.children,u=e.direction,b=void 0===u?"down":u,f=e.in,h=e.onEnter,O=e.onEntered,x=e.onEntering,y=e.onExit,v=e.onExited,g=e.onExiting,w=e.style,N=e.timeout,k=void 0===N?m:N,A=e.TransitionComponent,E=void 0===A?s.e:A,C=Object(a.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),T=Object(d.a)(),S=i.useRef(null),D=i.useCallback((function(e){S.current=r.findDOMNode(e)}),[]),I=Object(l.a)(n.ref,D),Y=Object(l.a)(I,t),_=function(e){return function(t){e&&(void 0===t?e(S.current):e(S.current,t))}},P=_((function(e,t){j(b,e),Object(p.b)(e),h&&h(e,t)})),R=_((function(e,t){var n=Object(p.a)({timeout:k,style:w},{mode:"enter"});e.style.webkitTransition=T.transitions.create("-webkit-transform",Object(c.a)({},n,{easing:T.transitions.easing.easeOut})),e.style.transition=T.transitions.create("transform",Object(c.a)({},n,{easing:T.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",x&&x(e,t)})),M=_(O),U=_(g),K=_((function(e){var t=Object(p.a)({timeout:k,style:w},{mode:"exit"});e.style.webkitTransition=T.transitions.create("-webkit-transform",Object(c.a)({},t,{easing:T.transitions.easing.sharp})),e.style.transition=T.transitions.create("transform",Object(c.a)({},t,{easing:T.transitions.easing.sharp})),j(b,e),y&&y(e)})),H=_((function(e){e.style.webkitTransition="",e.style.transition="",v&&v(e)})),z=i.useCallback((function(){S.current&&j(b,S.current)}),[b]);return i.useEffect((function(){if(!f&&"down"!==b&&"right"!==b){var e=Object(o.a)((function(){S.current&&j(b,S.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[b,f]),i.useEffect((function(){f||z()}),[f,z]),i.createElement(E,Object(c.a)({nodeRef:S,onEnter:P,onEntered:M,onEntering:R,onExit:K,onExited:H,onExiting:U,appear:!0,in:f,timeout:k},C),(function(e,t){return i.cloneElement(n,Object(c.a)({ref:Y,style:Object(c.a)({visibility:"exited"!==e||f?void 0:"hidden"},w,n.props.style)},t))}))}));t.a=b},"8rE2":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("6FTQ");function a(e,t){if(e){if("string"===typeof e)return Object(c.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(c.a)(e,t):void 0}}},W0MI:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/appointments",function(){return n("aSQx")}])},aSQx:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var c=n("z7pX"),a=n("vJKn"),i=n.n(a),r=n("rg98"),o=n("nKUr"),s=n("cpVT"),l=n("q1tI"),d=n.n(l),u=n("3Z9Z"),p=n("JI6e"),j=n("YFqc"),m=n.n(j),b=n("lIVJ"),f=n("wd/R"),h=n.n(f),O=n("Kg+a"),x=n("kfFl"),y=n("+JwS"),v=n("EQI2"),g=n("yv+Y"),w=n("6u8J"),N=n("X13+"),k=n("NIcq"),A=n("T00j"),E=n("20a2"),C=n("3O0d"),T=n("gV5c"),S=n("kv0W"),D=n("FT3n"),I=n("ZkZy");function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}var _=d.a.forwardRef((function(e,t){return Object(o.jsx)(w.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({direction:"up",ref:t},e))}));function P(e){var t=e.consultation,n=e.app_id,c=e.content;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:n==t.id?"card selected":"card",children:[Object(o.jsxs)("div",{className:"card-header",children:[Object(o.jsxs)("h2",{children:[" ",h()(t.date+t.time,"YYYY/MM/DDHH:mm").calendar()]}),t.teleconsultation?Object(o.jsx)(N.b,{}):null]}),Object(o.jsxs)("div",{className:"card-body d-flex",children:[Object(o.jsx)("div",{className:"doctor-img",children:Object(o.jsx)("a",{children:Object(o.jsx)("img",{src:t.medecin.image?"".concat(b.a.BACKEND_URL,"/").concat(t.medecin.image):"/image/medecin/homme.jpg",className:"img-fluid",alt:"User Image"})})}),Object(o.jsxs)("div",{className:"doc-info-cont",children:[Object(o.jsxs)("h4",{children:["  ",t.title," "]}),Object(o.jsx)("h5",{className:"doc-name",children:Object(o.jsxs)("a",{href:"/doctor/".concat(t.medecin.id),children:["Dr. ","".concat(t.medecin.nom," ").concat(t.medecin.prenom)]})})]})]}),Object(o.jsx)("div",{className:"card-action justify-content-center",children:Object(o.jsx)(m.a,{href:"/account/appointments?app_id=".concat(t.id),children:Object(o.jsxs)("a",{className:"link btn btn-primary",children:[" ",c.appointments.cardApps.link," "]})})})]})})}function R(){var e=Object(l.useState)([]),t=e[0],n=e[1],a=Object(l.useState)(),s=a[0],d=a[1],j=Object(E.useRouter)(),f=j.locale,h="ar"===f?I.a:"en"===f?D.a:S.a,O=j.query.app_id,x=Object(A.b)().userData;console.log(x),Object(l.useEffect)((function(){return O?fetch("".concat(b.a.BACKEND_URL,"/consultation/").concat(O),{headers:{"Content-Type":"application/json",Authorization:"token ".concat(x.token)}}).then((function(e){return e.json().then((function(e){e.error||d(e.consultation)})).catch((function(e){}))})).catch((function(e){})):d(),function(){}}),[O]),Object(l.useEffect)(Object(r.a)(i.a.mark((function e(){var t,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.token){e.next=2;break}return e.abrupt("return",j.push("account/new"));case 2:return e.next=4,fetch("".concat(b.a.BACKEND_URL,"/patient/appointments/venir"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(x.token)}});case 4:return t=e.sent,e.next=7,t.json();case 7:return c=e.sent,n(c.consultations),e.abrupt("return",(function(){}));case 10:case"end":return e.stop()}}),e)}))),[]);var y=function(e){var a=t.findIndex((function(t){return t.id===e}));a>-1&&n((function(e){var t=Object(c.a)(e);return t.splice(a,1),t}))},v=function(e,a){var i=t.findIndex((function(t){return t.id===e}));i>-1&&n((function(e){var t=Object(c.a)(e);return t[i]=a,t}))};return t?0===t.length?Object(o.jsxs)("div",{className:"container section-content",children:[Object(o.jsxs)("h1",{className:"text-center",children:[" ",h.appointments.myapp," "]}),Object(o.jsxs)("p",{className:"text-center",children:[" ",h.appointments.noApp," "]}),Object(o.jsx)(u.a,{className:"m-0 justify-content-center",children:Object(o.jsx)(m.a,{href:"/account/appointments/historique",children:Object(o.jsxs)("a",{className:"link black",children:[" ",h.appointments.history,"  "]})})}),Object(o.jsx)("div",{className:"text-center",children:Object(o.jsx)(m.a,{href:"/",children:Object(o.jsxs)("a",{className:"link btn btn-primary",children:[" ",h.appointments.takeapp,"  "]})})})]}):Object(o.jsxs)("div",{className:"section-content-app",children:[Object(o.jsxs)(u.a,{className:"mt-5 mb-5 justify-content-center flex",children:[Object(o.jsxs)("span",{className:"item-active-r title-r",children:[" ",h.appointments.myapp," "]}),Object(o.jsx)(m.a,{href:"/account/appointments/historique",children:Object(o.jsx)("span",{className:"title-r ",children:Object(o.jsxs)("a",{className:"link black",children:[" ",h.appointments.history," "]})})})]}),Object(o.jsxs)(u.a,{className:"m-0",children:[Object(o.jsx)(p.a,{lg:"3",className:"apointements-left",children:Object(o.jsx)("div",{className:"patient-appointments",children:t.map((function(e,t){return Object(o.jsx)(u.a,{className:"justify-content-center patient-appointment m-0",children:Object(o.jsx)(P,{content:h,consultation:e,handleUpdatedApp:v,handleCanceledApp:y,app_id:O})},t)}))})}),Object(o.jsx)(p.a,{lg:"9",children:s?Object(o.jsx)(u.a,{className:"justify-content-center patient-appointment m-0",children:Object(o.jsx)(M,{content:h,consultation:s,handleUpdatedApp:v,handleCanceledApp:y})}):null})]})]}):Object(o.jsxs)("div",{className:"container section-content",children:[Object(o.jsx)("h1",{className:"text-center",children:"  "}),Object(o.jsx)("div",{className:"text-center"})]})}function M(e){var t,n,c,a,i=e.consultation,r=e.handleCanceledApp,s=e.content,d=e.handleUpdatedApp,j=Object(A.b)().userData,f=Object(l.useState)(!1),w=f[0],E=f[1],S=Object(l.useState)(!1),D=S[0],I=S[1],Y=Object(l.useState)(),P=Y[0],R=Y[1],M=Object(l.useState)(),U=M[0],K=M[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"card",children:[Object(o.jsxs)("div",{className:"card-header",children:[Object(o.jsxs)("h2",{children:[" ",h()(i.date+i.time,"YYYY/MM/DDHH:mm").calendar()]}),i.teleconsultation?Object(o.jsx)(N.b,{}):null]}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsxs)(u.a,{children:[Object(o.jsx)(p.a,{lg:"7",md:"12",xs:"12",children:Object(o.jsxs)(u.a,{children:[Object(o.jsx)("div",{className:"doctor-img",children:Object(o.jsx)("a",{children:Object(o.jsx)("img",{src:i.medecin.image?"".concat(b.a.BACKEND_URL,"/").concat(i.medecin.image):"/image/medecin/homme.jpg",className:"img-fluid",alt:"User Image"})})}),Object(o.jsxs)("div",{className:"doc-info-cont",children:[Object(o.jsxs)("h4",{children:["  ",i.title," "]}),Object(o.jsx)("h5",{className:"doc-name",children:Object(o.jsxs)("a",{href:"/doctor/".concat(i.medecin.id),children:["Dr. ","".concat(i.medecin.nom," ").concat(i.medecin.prenom)]})})]}),Object(o.jsx)("div",{className:"doc-info-cont ml-5",children:Object(o.jsxs)("ul",{className:"contacts",children:[Object(o.jsxs)("li",{children:[Object(o.jsxs)("h6",{children:[" ",s.appointments.cardApp.accessInfos,"   "]}),i.medecin.adress?(i.medecin.adress.streetName?i.medecin.adress.streetName:"")+" "+(i.medecin.adress.buildingName?i.medecin.adress.buildingName:"")+" "+(i.medecin.adress.floor?"\xe9tage "+i.medecin.adress.floor:"")+" "+(i.medecin.adress.sector?i.medecin.adress.sector:"")+", "+(i.medecin.adress.codePostal?i.medecin.adress.codePostal:"")+" - "+(i.medecin.city?i.medecin.city.name:""):"Vous n'avez pas encore sp\xe9cifier vos information d'acc\xe9s"]}),Object(o.jsxs)("li",{children:[Object(o.jsxs)("h6",{children:[" ",s.appointments.cardApp.secretariat," "]}),i.medecin.phone," "]})]})})]})}),Object(o.jsx)(p.a,{lg:"5",md:"12",xs:"12",className:"order-sm-last",children:Object(o.jsx)(C.a,{apiKey:b.a.apiKey,locations:[{latitude:null===i||void 0===i||null===(t=i.medecin)||void 0===t||null===(n=t.adress)||void 0===n?void 0:n.latitude,longitude:null===i||void 0===i||null===(c=i.medecin)||void 0===c||null===(a=c.adress)||void 0===a?void 0:a.longitude}]})})]}),i.teleconsultation?Object(o.jsxs)(u.a,{className:"mt-5",children:[Object(o.jsx)(p.a,{md:"6",children:Object(o.jsxs)("p",{children:["  ",s.appointments.cardApp.click," "]})}),Object(o.jsx)(p.a,{md:"6",children:Object(o.jsx)(m.a,{href:"/consultation/".concat(i.id),children:Object(o.jsxs)("a",{className:"link btn btn-primary",children:[" ",s.appointments.cardApp.rejoindre," "]})})})]}):null]}),Object(o.jsxs)("div",{className:"card-action",children:[Object(o.jsxs)(O.a,{onClick:function(){return I(!0)},color:"transparent",children:[" ",Object(o.jsx)(k.i,{})," ",s.appointments.cardApp.deplacer," "]}),Object(o.jsxs)(O.a,{color:"transparent",onClick:function(){return E(!0)},style:{color:"#f1000f"},children:[" ",Object(o.jsx)(N.f,{size:"32px"})," ",s.appointments.cardApp.annuler," "]})]})]}),Object(o.jsxs)(x.a,{open:w,maxWidth:"lg",TransitionComponent:_,keepMounted:!1,onClose:function(){return E(!1)},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(o.jsxs)(g.a,{id:"alert-dialog-slide-title",children:[" ",s.appointments.cardApp.confirmCancel,"  "]}),Object(o.jsxs)(v.a,{children:[s.appointments.cardApp.wantYou,"  ",h()(i.date+i.time,"YYYY/MM/DDHH:mm").calendar()," ",s.appointments.cardApp.with," Dr. ","".concat(i.medecin.nom," ").concat(i.medecin.prenom)]}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(O.a,{onClick:function(){return E(!1)},color:"transparent",children:s.appointments.cardApp.retour}),Object(o.jsx)(O.a,{onClick:function(){fetch("".concat(b.a.BACKEND_URL,"/consultation/cancel/").concat(i.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"token ".concat(j.token)},body:JSON.stringify({})}).then((function(e){return e.json().then((function(e){e.error?e.validator:(E(!1),r(i.id))}))})).catch((function(e){console.log(e)}))},color:"danger",children:s.appointments.cardApp.annuler})]})]}),D?Object(o.jsxs)(x.a,{open:D,maxWidth:"lg",TransitionComponent:_,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(o.jsxs)(g.a,{id:"alert-dialog-slide-title",children:[" ",s.appointments.cardApp.docAvai," "]}),Object(o.jsx)(v.a,{children:Object(o.jsx)(T.a,{showDisponibilite:i.medecin,setSelectedHour:function(e,t){K(e),R(t)}})}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)("div",{children:P||U?s.appointments.cardApp.selecTtime+" : "+h()(U+P,"YYYY/MM/DDHH:mm").calendar():null}),Object(o.jsxs)("div",{children:[Object(o.jsx)(O.a,{onClick:function(){I(!1)},color:"transparent",children:s.appointments.cardApp.retour}),Object(o.jsx)(O.a,{disabled:!P,onClick:function(){fetch("".concat(b.a.BACKEND_URL,"/consultation/deplacer/").concat(i.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"token ".concat(j.token)},body:JSON.stringify({date:U,time:P})}).then((function(e){return e.json().then((function(e){e.error?e.validator:(I(!1),d(i.id,e.consultation))}))})).catch((function(e){console.log(e)}))},color:"primary",children:s.appointments.cardApp.confirm})]})]})]}):null]})}},ntbh:function(e,t){(function(t){e.exports=function(){var e={149:function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"===typeof window&&(t=window)}e.exports=t}},n={};function c(t){if(n[t])return n[t].exports;var a=n[t]={exports:{}},i=!0;try{e[t](a,a.exports,c),i=!1}finally{i&&delete n[t]}return a.exports}return c.ab=t+"/",c(149)}()}).call(this,"/")},xvhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("8rE2");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],c=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(c=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);c=!0);}catch(s){a=!0,i=s}finally{try{c||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||Object(c.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},z7pX:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n("6FTQ");var a=n("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["W0MI",0,1,3,8,11,19,2,4,5,10,15]]]);