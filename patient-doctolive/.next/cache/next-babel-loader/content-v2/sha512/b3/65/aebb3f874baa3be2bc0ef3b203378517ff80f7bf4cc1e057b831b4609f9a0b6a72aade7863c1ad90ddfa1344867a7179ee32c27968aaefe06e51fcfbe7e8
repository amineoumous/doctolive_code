{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/Users/CARRE/Documents/GitHub/doctolive_code/patient-doctolive/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\patient-doctolive\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { Button, TextField, FormControlLabel, Checkbox, Box, Typography, Container } from '@material-ui/core';\nimport Config from './../EndPoint';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouter } from 'next/router';\nimport contentFR from './../contentFR';\nimport contentEN from './../contentEN';\nimport contentAR from './../contentAR';\nimport { Row, Collapse, Alert } from 'react-bootstrap';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    }\n  };\n});\nexport default function AuthForm(props) {\n  _s();\n\n  var classes = useStyles();\n  var router = useRouter();\n  var locale = router.locale;\n  var content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(false),\n      emailError = _useState3[0],\n      setEmailError = _useState3[1];\n\n  var _useState4 = useState(false),\n      passwordError = _useState4[0],\n      setPasswordError = _useState4[1];\n\n  var _useState5 = useState(\"Information incorrect\"),\n      messageError = _useState5[0],\n      setErrorMessage = _useState5[1];\n\n  var _useState6 = useState({\n    sending: false,\n    success: false,\n    donneIncorecte: false\n  }),\n      response = _useState6[0],\n      setResponse = _useState6[1];\n\n  var validateField = function validateField(e) {\n    if (e.target.name === \"email\") {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      var emailErr = !re.test(String(email).toLowerCase());\n      setEmailError(emailErr);\n    } else if (e.target.name === \"password\") {\n      var passwordLeng = password.length;\n      setPasswordError(passwordLeng < 8);\n    }\n  };\n\n  var submiting = function submiting(e) {\n    e.preventDefault();\n    setResponse(function (old) {\n      return _objectSpread(_objectSpread({}, old), {}, {\n        sending: true\n      });\n    });\n\n    if (!emailError && !passwordError) {\n      var data = {\n        email: email,\n        password: password\n      };\n      fetch(\"\".concat(Config.BACKEND_URL, \"/patient/auth\"), {\n        method: \"post\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(_objectSpread({}, data))\n      }).then(function (r) {\n        return r.json().then(function (res) {\n          console.log(res);\n\n          if (!res.error) {\n            props.submiting(res);\n            setResponse({\n              sending: false,\n              success: true,\n              donneIncorecte: false\n            });\n          } else {\n            setResponse({\n              sending: false,\n              success: false,\n              donneIncorecte: true\n            });\n\n            if (res.validator) {} else {\n              setErrorMessage(res.message);\n            }\n          }\n        })[\"catch\"](function (e) {\n          console.log(e.response);\n          setResponse({\n            sending: false,\n            success: false,\n            donneIncorecte: true\n          });\n\n          if (e.response.data.error) {\n            setErrorMessage(e.response.data.message);\n          } else {\n            setErrorMessage(\"Une éreur inconue est survenue\");\n          }\n        });\n      })[\"catch\"](function (e) {\n        console.log(e.response);\n        setResponse({\n          sending: false,\n          success: false,\n          donneIncorecte: true\n        });\n\n        if (e.response.data.error) {\n          setErrorMessage(e.response.data.message);\n        } else {\n          setErrorMessage(\"Une éreur inconue est survenue\");\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: function onSubmit(e) {\n          return submiting(e, {\n            email: email,\n            password: password\n          });\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          value: email,\n          onChange: function onChange(e) {\n            return setEmail(e.target.value);\n          },\n          error: emailError,\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"email\",\n          variant: \"outlined\",\n          onBlur: validateField,\n          label: content[\"new\"].emailLabel,\n          name: \"email\",\n          autoComplete: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          margin: \"normal\",\n          value: password,\n          variant: \"outlined\",\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          },\n          error: passwordError,\n          required: true,\n          fullWidth: true,\n          onBlur: validateField,\n          name: \"password\",\n          label: content[\"new\"].passLabel,\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"current-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          children: content[\"new\"].signin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 8,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Collapse, {\n          \"in\": response.donneIncorecte,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"example-collapse-text\",\n            children: /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"danger\",\n              children: [\" \", messageError, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthForm, \"hmre8EMf0mwaZLyCHCQivohviCw=\", false, function () {\n  return [useStyles, useRouter];\n});\n\n_c = AuthForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"sources":["C:/Users/CARRE/Documents/GitHub/doctolive_code/patient-doctolive/components/Login.js"],"names":["React","useState","Button","TextField","FormControlLabel","Checkbox","Box","Typography","Container","Config","makeStyles","useRouter","contentFR","contentEN","contentAR","Row","Collapse","Alert","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","AuthForm","props","classes","router","locale","content","email","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","messageError","setErrorMessage","sending","success","donneIncorecte","response","setResponse","validateField","e","target","name","re","emailErr","test","String","toLowerCase","passwordLeng","length","submiting","preventDefault","old","data","fetch","BACKEND_URL","method","headers","body","JSON","stringify","then","r","json","res","console","log","error","validator","message","value","emailLabel","passLabel","signin"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\n\r\nimport { Button, TextField, FormControlLabel, Checkbox, Box, Typography, Container} from '@material-ui/core';\r\nimport Config from './../EndPoint'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { useRouter } from 'next/router'\r\n\r\n\r\nimport contentFR from './../contentFR'\r\nimport contentEN from './../contentEN'\r\nimport contentAR from './../contentAR'\r\n\r\nimport {Row, Collapse, Alert} from 'react-bootstrap'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\n\r\nexport default function AuthForm(props){\r\n  const classes = useStyles();\r\n  const router = useRouter();\r\n\r\n\r\n    const {locale} = router;\r\n    const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [emailError, setEmailError]= useState(false)\r\n  const [passwordError, setPasswordError]= useState(false)\r\n  const [messageError, setErrorMessage] = useState(\"Information incorrect\")\r\n\r\n  const [response, setResponse] = useState({\r\n    sending:false,\r\n    success:false,   \r\n    donneIncorecte: false                 \r\n  })\r\n\r\n  const validateField = (e) => {\r\n    if(e.target.name === \"email\"){\r\n      let re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      let emailErr = ! re.test(String(email).toLowerCase());\r\n      \r\n      setEmailError(emailErr);\r\n    }\r\n    else  if(e.target.name === \"password\"){\r\n      let passwordLeng = password.length ;\r\n      setPasswordError(passwordLeng < 8);\r\n      \r\n    }\r\n\r\n  }\r\n\r\n  const submiting = (e) => {\r\n    e.preventDefault();\r\n        setResponse(old =>  { return {...old, sending: true}});\r\n\r\n        if(!emailError && !passwordError){\r\n          let data = {email, password};\r\n\r\n          fetch(`${Config.BACKEND_URL}/patient/auth`,{\r\n              method:\"post\",\r\n              headers: {\r\n                  'Content-Type': 'application/json',\r\n              },\r\n              body:JSON.stringify({...data})\r\n          })\r\n          .then(\r\n              (r) => r.json()\r\n              .then(res => {\r\n                console.log(res)\r\n                  if(!res.error){\r\n                      props.submiting(res);\r\n                      setResponse({sending: false, success:true, donneIncorecte: false});\r\n                  }else {\r\n                      setResponse({sending: false, success:false, donneIncorecte:true})\r\n                      if(res.validator){\r\n  \r\n                      }else{\r\n                        setErrorMessage(res.message)\r\n                      }\r\n                  }\r\n             \r\n              })\r\n              .catch(e =>{ \r\n                console.log(e.response)\r\n                  setResponse({sending: false, success:false, donneIncorecte:true})\r\n                  if(e.response.data.error){\r\n                    setErrorMessage(e.response.data.message)\r\n                  }else {\r\n                    setErrorMessage(\"Une éreur inconue est survenue\")\r\n                  }\r\n              })\r\n              )\r\n              .catch(e =>{ \r\n                console.log(e.response)\r\n                  setResponse({sending: false, success:false, donneIncorecte:true})\r\n                  if(e.response.data.error){\r\n                    setErrorMessage(e.response.data.message)\r\n                  }else {\r\n                    setErrorMessage(\"Une éreur inconue est survenue\")\r\n                  }\r\n              })\r\n        }\r\n        \r\n  }\r\n  return(\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n\r\n      <div className={classes.paper}>\r\n        {/* <Typography component=\"h1\" variant=\"h5\"> {content.new.auth} </Typography> */}\r\n        <form className={classes.form} onSubmit={(e) => submiting(e, {email, password})}>\r\n          <TextField\r\n            value= {email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            error={emailError}\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            variant=\"outlined\"\r\n            onBlur={validateField} \r\n            label={content.new.emailLabel}\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n          <TextField\r\n            margin=\"normal\"\r\n            value={password}\r\n            variant=\"outlined\"\r\n            onChange={ (e) => setPassword(e.target.value)}\r\n            error={passwordError}\r\n            required\r\n            fullWidth\r\n            onBlur={validateField} \r\n            name=\"password\"\r\n            label={content.new.passLabel}\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n           {content.new.signin}\r\n          </Button>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n      <Row className=\"justify-content-center\">\r\n              <Collapse in={response.donneIncorecte} >\r\n                    <div id=\"example-collapse-text\">\r\n                      <Alert variant=\"danger\"> {messageError} </Alert>\r\n                    </div>\r\n                </Collapse>\r\n            </Row>\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}