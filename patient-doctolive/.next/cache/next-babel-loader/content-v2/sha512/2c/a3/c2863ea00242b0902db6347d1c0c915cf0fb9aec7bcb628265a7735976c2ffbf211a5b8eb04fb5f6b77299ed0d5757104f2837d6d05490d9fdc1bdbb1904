{"ast":null,"code":"import _regeneratorRuntime from \"C:/app/doctolive_code/patient-doctolive/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/app/doctolive_code/patient-doctolive/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport Link from 'next/link';\nimport Config from './../../../EndPoint';\nimport moment from 'moment';\nimport { BsFillCameraVideoFill } from 'react-icons/bs';\nimport { useAuth } from './../../../context/AuthContext';\nimport { useRouter } from 'next/router';\nimport contentFR from './../../../contentFR';\nimport contentEN from './../../../contentEN';\nimport contentAR from './../../../contentAR';\n\nfunction CardAppointment(_ref) {\n  var consultation = _ref.consultation,\n      app_id = _ref.app_id;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: app_id == consultation.id ? \"card selected\" : \"card\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxs(\"h2\", {\n          children: [\" \", moment.utc(consultation.date + consultation.time, 'YYYY/MM/DDHH:mm').calendar()]\n        }), consultation.teleconsultation ? /*#__PURE__*/_jsx(BsFillCameraVideoFill, {}) : null]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-body d-flex\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"doctor-img\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: consultation.medecin.image ? \"\".concat(Config.BACKEND_URL, \"/\").concat(consultation.medecin.image) : \"/image/medecin/homme.jpg\",\n              className: \"img-fluid\",\n              alt: \"User Image\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"doc-info-cont\",\n          children: [/*#__PURE__*/_jsxs(\"h4\", {\n            children: [\"  \", consultation.title, \" \"]\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"doc-name\",\n            children: /*#__PURE__*/_jsxs(\"a\", {\n              href: \"/doctor/\".concat(consultation.medecin.id),\n              children: [\"Dr. \", \"\".concat(consultation.medecin.nom, \" \").concat(consultation.medecin.prenom)]\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"card-action justify-content-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/account/appointments/historique?app_id=\".concat(consultation.id),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"link btn btn-primary\",\n            children: \" Voir plus de d\\xE9tails \"\n          })\n        })\n      })]\n    })\n  });\n}\n\nexport default function Appointments() {\n  var router = useRouter();\n  var locale = router.locale;\n  var content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n\n  var _useState = useState([]),\n      consultations = _useState[0],\n      setConsultations = _useState[1];\n\n  var _useState2 = useState(),\n      consultation = _useState2[0],\n      setConsultation = _useState2[1];\n\n  var app_id = router.query.app_id;\n\n  var _useAuth = useAuth(),\n      userData = _useAuth.userData;\n\n  useEffect(function () {\n    if (app_id) {\n      fetch(\"\".concat(Config.BACKEND_URL, \"/consultation/\").concat(app_id), {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': \"token \".concat(userData.token)\n        }\n      }).then(function (r) {\n        return r.json().then(function (res) {\n          if (!res.error) {\n            setConsultation(res.consultation);\n          }\n        })[\"catch\"](function (error) {});\n      })[\"catch\"](function (error) {});\n    } else {\n      setConsultation();\n    }\n\n    return function () {};\n  }, [app_id]);\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (userData.token) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", router.push('account/new'));\n\n          case 2:\n            _context.next = 4;\n            return fetch(\"\".concat(Config.BACKEND_URL, \"/patient/appointments/historique\"), {\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': \"token \".concat(userData.token)\n              }\n            });\n\n          case 4:\n            res = _context.sent;\n            _context.next = 7;\n            return res.json();\n\n          case 7:\n            data = _context.sent;\n            setConsultations(data.consultations);\n            return _context.abrupt(\"return\", function () {});\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  if (!consultations) return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"container section-content\",\n    children: [/*#__PURE__*/_jsxs(\"h1\", {\n      className: \"text-center\",\n      children: [\" \", content.appointments.notAuth, \" \"]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/login\",\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          className: \"link btn btn-primary btn-update-pro\",\n          children: [\" \", content.appointments.takeapp, \" \"]\n        })\n      })\n    })]\n  });\n\n  if (consultations.length === 0) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: \"container section-content\",\n      children: [/*#__PURE__*/_jsxs(\"h1\", {\n        className: \"text-center\",\n        children: [\" \", content.appointments.myapp, \" \"]\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        className: \"text-center\",\n        children: [\" \", content.appointments.noApp, \" \"]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: \"/image/calendar-pro.svg\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"link btn btn-primary btn-update-pro\",\n            children: [\" \", content.appointments.takeapp, \" \"]\n          })\n        })\n      }), /*#__PURE__*/_jsx(Row, {\n        className: \"m-0 justify-content-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/account/appointments\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"link black\",\n            children: [\" \", content.appointments.nextApp, \" \"]\n          })\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"section-content\",\n    children: [/*#__PURE__*/_jsx(Row, {\n      className: \"m-0 justify-content-center\",\n      children: /*#__PURE__*/_jsxs(\"h1\", {\n        children: [\" \", content.appointments.myHistory, \" \"]\n      })\n    }), /*#__PURE__*/_jsx(Row, {\n      className: \"m-0 justify-content-center\",\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/account/appointments\",\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          className: \"link black\",\n          children: [\" \", content.appointments.nextApp, \" \"]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Row, {\n      className: \"m-0\",\n      children: [/*#__PURE__*/_jsx(Col, {\n        lg: \"3\",\n        className: \"apointements-left\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"patient-appointments\",\n          children: consultations.map(function (consultation, index) {\n            return /*#__PURE__*/_jsx(Row, {\n              className: \"justify-content-center patient-appointment m-0\",\n              children: /*#__PURE__*/_jsx(CardAppointment, {\n                content: content,\n                consultation: consultation,\n                app_id: app_id\n              })\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: \"9\",\n        children: !consultation ? null : /*#__PURE__*/_jsx(Row, {\n          className: \"justify-content-center patient-appointment m-0\",\n          children: /*#__PURE__*/_jsx(CardDetailsAppointment, {\n            content: content,\n            consultation: consultation\n          })\n        })\n      })]\n    })]\n  });\n}\n\nfunction CardDetailsAppointment(_ref3) {\n  var consultation = _ref3.consultation,\n      content = _ref3.content;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxs(\"h2\", {\n          children: [\" \", moment.utc(consultation.date + consultation.time, 'YYYY/MM/DDHH:mm').calendar()]\n        }), consultation.teleconsultation ? /*#__PURE__*/_jsx(BsFillCameraVideoFill, {}) : null]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsx(Row, {\n          children: /*#__PURE__*/_jsx(Col, {\n            lg: \"7\",\n            md: \"12\",\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxs(Row, {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"doctor-img\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: consultation.medecin.image ? \"\".concat(Config.BACKEND_URL, \"/\").concat(consultation.medecin.image) : \"/image/medecin/homme.jpg\",\n                    className: \"img-fluid\",\n                    alt: \"User Image\"\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"doc-info-cont\",\n                children: [/*#__PURE__*/_jsxs(\"h4\", {\n                  children: [\"  \", consultation.title, \" \"]\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"doc-name\",\n                  children: /*#__PURE__*/_jsxs(\"a\", {\n                    href: \"/doctor/\".concat(consultation.medecin.id),\n                    children: [\"Dr. \", \"\".concat(consultation.medecin.nom, \" \").concat(consultation.medecin.prenom)]\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"doc-info-cont ml-5\",\n                children: /*#__PURE__*/_jsxs(\"ul\", {\n                  className: \"contacts\",\n                  children: [/*#__PURE__*/_jsxs(\"li\", {\n                    children: [/*#__PURE__*/_jsxs(\"h6\", {\n                      children: [\" \", content.appointments.accessInfos, \" \"]\n                    }), !consultation.medecin.adress ? content.appointments.cardApp.notSpecified : (consultation.medecin.adress.streetName ? consultation.medecin.adress.streetName : \"\") + \" \" + (consultation.medecin.adress.buildingName ? consultation.medecin.adress.buildingName : \"\") + \" \" + (consultation.medecin.adress.floor ? \"étage \" + consultation.medecin.adress.floor : \"\") + \" \" + (consultation.medecin.adress.sector ? consultation.medecin.adress.sector : \"\") + \", \" + (consultation.medecin.adress.codePostal ? consultation.medecin.adress.codePostal : \"\") + \" - \" + (consultation.medecin.city ? consultation.medecin.city.name : \"\")]\n                  }), /*#__PURE__*/_jsxs(\"li\", {\n                    children: [/*#__PURE__*/_jsxs(\"h6\", {\n                      children: [\" \", content.appointments.secretariat, \" \"]\n                    }), consultation.medecin.phone, \" \"]\n                  })]\n                })\n              })]\n            })\n          })\n        }), !consultation.teleconsultation ? null : /*#__PURE__*/_jsx(Row, {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsx(Col, {\n            md: \"6\",\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"/consultation/\".concat(consultation.id),\n              children: /*#__PURE__*/_jsxs(\"a\", {\n                className: \"link btn btn-primary btn-update-pro\",\n                children: [\" \", content.appointments.cardApp.seeInfosShared, \" \"]\n              })\n            })\n          })\n        })]\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}