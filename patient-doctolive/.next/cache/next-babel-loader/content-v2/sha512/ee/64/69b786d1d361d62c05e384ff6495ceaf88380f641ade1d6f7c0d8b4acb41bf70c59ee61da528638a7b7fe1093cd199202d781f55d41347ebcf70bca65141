{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport Link from 'next/link';\nimport Config from './../../../EndPoint';\nimport moment from 'moment';\nimport { BsFillCameraVideoFill } from 'react-icons/bs';\nimport { useAuth } from './../../../context/AuthContext';\nimport { useRouter } from 'next/router';\nimport contentFR from './../../../contentFR';\nimport contentEN from './../../../contentEN';\nimport contentAR from './../../../contentAR';\n\nfunction CardAppointment({\n  consultation,\n  app_id\n}) {\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: app_id == consultation.id ? \"card selected\" : \"card\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxs(\"h2\", {\n          children: [\" \", moment.utc(consultation.date + consultation.time, 'YYYY/MM/DDHH:mm').calendar()]\n        }), consultation.teleconsultation ? /*#__PURE__*/_jsx(BsFillCameraVideoFill, {}) : null]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-body d-flex\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"doctor-img\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: consultation.medecin.image ? `${Config.BACKEND_URL}/${consultation.medecin.image}` : \"/image/medecin/homme.jpg\",\n              className: \"img-fluid\",\n              alt: \"User Image\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"doc-info-cont\",\n          children: [/*#__PURE__*/_jsxs(\"h4\", {\n            children: [\"  \", consultation.title, \" \"]\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"doc-name\",\n            children: /*#__PURE__*/_jsxs(\"a\", {\n              href: `/doctor/${consultation.medecin.id}`,\n              children: [\"Dr. \", `${consultation.medecin.nom} ${consultation.medecin.prenom}`]\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"card-action justify-content-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/account/appointments/historique?app_id=${consultation.id}`,\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"link btn btn-primary\",\n            children: \" Voir plus de d\\xE9tails \"\n          })\n        })\n      })]\n    })\n  });\n}\n\nexport default function Appointments() {\n  const router = useRouter();\n  const {\n    locale\n  } = router;\n  const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n  const {\n    0: consultations,\n    1: setConsultations\n  } = useState([]);\n  const {\n    0: consultation,\n    1: setConsultation\n  } = useState();\n  const {\n    app_id\n  } = router.query;\n  const {\n    userData\n  } = useAuth();\n  useEffect(() => {\n    if (app_id) {\n      fetch(`${Config.BACKEND_URL}/consultation/${app_id}`, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `token ${userData.token}`\n        }\n      }).then(r => r.json().then(res => {\n        if (!res.error) {\n          setConsultation(res.consultation);\n        }\n      }).catch(error => {})).catch(error => {});\n    } else {\n      setConsultation();\n    }\n\n    return () => {};\n  }, [app_id]);\n  useEffect(async () => {\n    if (!userData.token) return router.push('account/new');\n    const res = await fetch(`${Config.BACKEND_URL}/patient/appointments/historique`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `token ${userData.token}`\n      }\n    });\n    const data = await res.json();\n    setConsultations(data.consultations);\n    return () => {};\n  }, []);\n  if (!consultations) return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"container section-content\",\n    children: [/*#__PURE__*/_jsxs(\"h1\", {\n      className: \"text-center\",\n      children: [\" \", content.appointments.notAuth, \" \"]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/login\",\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          className: \"link btn btn-primary btn-update-pro\",\n          children: [\" \", content.appointments.takeapp, \" \"]\n        })\n      })\n    })]\n  });\n\n  if (consultations.length === 0) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: \"container section-content\",\n      children: [/*#__PURE__*/_jsxs(\"h1\", {\n        className: \"text-center\",\n        children: [\" \", content.appointments.myapp, \" \"]\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        className: \"text-center\",\n        children: [\" \", content.appointments.noApp, \" \"]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: \"/image/calendar-pro.svg\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"link btn btn-primary btn-update-pro\",\n            children: [\" \", content.appointments.takeapp, \" \"]\n          })\n        })\n      }), /*#__PURE__*/_jsx(Row, {\n        className: \"m-0 justify-content-center\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: `/account/appointments`,\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: \"link black\",\n            children: [\" \", content.appointments.nextApp, \" \"]\n          })\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"section-content\",\n    children: [/*#__PURE__*/_jsx(Row, {\n      className: \"m-0 justify-content-center\",\n      children: /*#__PURE__*/_jsxs(\"h1\", {\n        children: [\" \", content.appointments.myHistory, \" \"]\n      })\n    }), /*#__PURE__*/_jsx(Row, {\n      className: \"m-0 justify-content-center\",\n      children: /*#__PURE__*/_jsx(Link, {\n        href: `/account/appointments`,\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          className: \"link black\",\n          children: [\" \", content.appointments.nextApp, \" \"]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Row, {\n      className: \"m-0\",\n      children: [/*#__PURE__*/_jsx(Col, {\n        lg: \"3\",\n        className: \"apointements-left\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"patient-appointments\",\n          children: consultations.map((consultation, index) => {\n            return /*#__PURE__*/_jsx(Row, {\n              className: \"justify-content-center patient-appointment m-0\",\n              children: /*#__PURE__*/_jsx(CardAppointment, {\n                content: content,\n                consultation: consultation,\n                app_id: app_id\n              })\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(Col, {\n        lg: \"9\",\n        children: !consultation ? null : /*#__PURE__*/_jsx(Row, {\n          className: \"justify-content-center patient-appointment m-0\",\n          children: /*#__PURE__*/_jsx(CardDetailsAppointment, {\n            content: content,\n            consultation: consultation\n          })\n        })\n      })]\n    })]\n  });\n}\n\nfunction CardDetailsAppointment({\n  consultation,\n  content\n}) {\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxs(\"h2\", {\n          children: [\" \", moment.utc(consultation.date + consultation.time, 'YYYY/MM/DDHH:mm').calendar()]\n        }), consultation.teleconsultation ? /*#__PURE__*/_jsx(BsFillCameraVideoFill, {}) : null]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsx(Row, {\n          children: /*#__PURE__*/_jsx(Col, {\n            lg: \"7\",\n            md: \"12\",\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxs(Row, {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"doctor-img\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: consultation.medecin.image ? `${Config.BACKEND_URL}/${consultation.medecin.image}` : \"/image/medecin/homme.jpg\",\n                    className: \"img-fluid\",\n                    alt: \"User Image\"\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"doc-info-cont\",\n                children: [/*#__PURE__*/_jsxs(\"h4\", {\n                  children: [\"  \", consultation.title, \" \"]\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"doc-name\",\n                  children: /*#__PURE__*/_jsxs(\"a\", {\n                    href: `/doctor/${consultation.medecin.id}`,\n                    children: [\"Dr. \", `${consultation.medecin.nom} ${consultation.medecin.prenom}`]\n                  })\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"doc-info-cont ml-5\",\n                children: /*#__PURE__*/_jsxs(\"ul\", {\n                  className: \"contacts\",\n                  children: [/*#__PURE__*/_jsxs(\"li\", {\n                    children: [/*#__PURE__*/_jsxs(\"h6\", {\n                      children: [\" \", content.appointments.accessInfos, \" \"]\n                    }), !consultation.medecin.adress ? content.appointments.cardApp.notSpecified : (consultation.medecin.adress.streetName ? consultation.medecin.adress.streetName : \"\") + \" \" + (consultation.medecin.adress.buildingName ? consultation.medecin.adress.buildingName : \"\") + \" \" + (consultation.medecin.adress.floor ? \"Ã©tage \" + consultation.medecin.adress.floor : \"\") + \" \" + (consultation.medecin.adress.sector ? consultation.medecin.adress.sector : \"\") + \", \" + (consultation.medecin.adress.codePostal ? consultation.medecin.adress.codePostal : \"\") + \" - \" + (consultation.medecin.city ? consultation.medecin.city.name : \"\")]\n                  }), /*#__PURE__*/_jsxs(\"li\", {\n                    children: [/*#__PURE__*/_jsxs(\"h6\", {\n                      children: [\" \", content.appointments.secretariat, \" \"]\n                    }), consultation.medecin.phone, \" \"]\n                  })]\n                })\n              })]\n            })\n          })\n        }), !consultation.teleconsultation ? null : /*#__PURE__*/_jsx(Row, {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsx(Col, {\n            md: \"6\",\n            children: /*#__PURE__*/_jsx(Link, {\n              href: `/consultation/${consultation.id}`,\n              children: /*#__PURE__*/_jsxs(\"a\", {\n                className: \"link btn btn-primary btn-update-pro\",\n                children: [\" \", content.appointments.cardApp.seeInfosShared, \" \"]\n              })\n            })\n          })\n        })]\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}