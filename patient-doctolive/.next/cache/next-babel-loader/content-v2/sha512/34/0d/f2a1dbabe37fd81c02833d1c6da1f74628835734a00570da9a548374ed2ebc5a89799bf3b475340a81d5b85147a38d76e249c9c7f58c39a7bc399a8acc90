{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\patient-doctolive\\\\components\\\\Login.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport { Button, TextField, FormControlLabel, Checkbox, Box, Typography, Container } from '@material-ui/core';\nimport Config from './../EndPoint';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouter } from 'next/router';\nimport contentFR from './../contentFR';\nimport contentEN from './../contentEN';\nimport contentAR from './../contentAR';\nimport { Row, Collapse, Alert } from 'react-bootstrap';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function AuthForm(props) {\n  const classes = useStyles();\n  const router = useRouter();\n  const {\n    locale\n  } = router;\n  const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: emailError,\n    1: setEmailError\n  } = useState(false);\n  const {\n    0: passwordError,\n    1: setPasswordError\n  } = useState(false);\n  const {\n    0: messageError,\n    1: setErrorMessage\n  } = useState(\"Information incorrect\");\n  const {\n    0: response,\n    1: setResponse\n  } = useState({\n    sending: false,\n    success: false,\n    donneIncorecte: false\n  });\n\n  const validateField = e => {\n    if (e.target.name === \"email\") {\n      let re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      let emailErr = !re.test(String(email).toLowerCase());\n      setEmailError(emailErr);\n    } else if (e.target.name === \"password\") {\n      let passwordLeng = password.length;\n      setPasswordError(passwordLeng < 8);\n    }\n  };\n\n  const submiting = e => {\n    e.preventDefault();\n    setResponse(old => {\n      return _objectSpread(_objectSpread({}, old), {}, {\n        sending: true\n      });\n    });\n\n    if (!emailError && !passwordError) {\n      let data = {\n        email,\n        password\n      };\n      fetch(`${Config.BACKEND_URL}/patient/auth`, {\n        method: \"post\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(_objectSpread({}, data))\n      }).then(r => r.json().then(res => {\n        console.log(res);\n\n        if (!res.error) {\n          props.submiting(res);\n          setResponse({\n            sending: false,\n            success: true,\n            donneIncorecte: false\n          });\n        } else {\n          setResponse({\n            sending: false,\n            success: false,\n            donneIncorecte: true\n          });\n\n          if (res.validator) {} else {\n            setErrorMessage(res.message);\n          }\n        }\n      }).catch(e => {\n        console.log(e.response);\n        setResponse({\n          sending: false,\n          success: false,\n          donneIncorecte: true\n        });\n\n        if (e.response.data.error) {\n          setErrorMessage(e.response.data.message);\n        } else {\n          setErrorMessage(\"Une éreur inconue est survenue\");\n        }\n      })).catch(e => {\n        console.log(e.response);\n        setResponse({\n          sending: false,\n          success: false,\n          donneIncorecte: true\n        });\n\n        if (e.response.data.error) {\n          setErrorMessage(e.response.data.message);\n        } else {\n          setErrorMessage(\"Une éreur inconue est survenue\");\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: e => submiting(e, {\n          email,\n          password\n        }),\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          error: emailError,\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"email\",\n          variant: \"outlined\",\n          onBlur: validateField,\n          label: content.new.emailLabel,\n          name: \"email\",\n          autoComplete: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          margin: \"normal\",\n          value: password,\n          variant: \"outlined\",\n          onChange: e => setPassword(e.target.value),\n          error: passwordError,\n          required: true,\n          fullWidth: true,\n          onBlur: validateField,\n          name: \"password\",\n          label: content.new.passLabel,\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"current-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          children: content.new.signin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 8,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Collapse, {\n          in: response.donneIncorecte,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"example-collapse-text\",\n            children: /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"danger\",\n              children: [\" \", messageError, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["C:/Users/CARRE/Documents/GitHub/doctolive_code/patient-doctolive/components/Login.js"],"names":["React","useState","Button","TextField","FormControlLabel","Checkbox","Box","Typography","Container","Config","makeStyles","useRouter","contentFR","contentEN","contentAR","Row","Collapse","Alert","useStyles","theme","paper","display","flexDirection","alignItems","avatar","margin","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","AuthForm","props","classes","router","locale","content","email","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","messageError","setErrorMessage","response","setResponse","sending","success","donneIncorecte","validateField","e","target","name","re","emailErr","test","String","toLowerCase","passwordLeng","length","submiting","preventDefault","old","data","fetch","BACKEND_URL","method","headers","body","JSON","stringify","then","r","json","res","console","log","error","validator","message","catch","value","new","emailLabel","passLabel","signin"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\n\r\nimport { Button, TextField, FormControlLabel, Checkbox, Box, Typography, Container} from '@material-ui/core';\r\nimport Config from './../EndPoint'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { useRouter } from 'next/router'\r\n\r\n\r\nimport contentFR from './../contentFR'\r\nimport contentEN from './../contentEN'\r\nimport contentAR from './../contentAR'\r\n\r\nimport {Row, Collapse, Alert} from 'react-bootstrap'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\n\r\nexport default function AuthForm(props){\r\n  const classes = useStyles();\r\n  const router = useRouter();\r\n\r\n\r\n    const {locale} = router;\r\n    const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [emailError, setEmailError]= useState(false)\r\n  const [passwordError, setPasswordError]= useState(false)\r\n  const [messageError, setErrorMessage] = useState(\"Information incorrect\")\r\n\r\n  const [response, setResponse] = useState({\r\n    sending:false,\r\n    success:false,   \r\n    donneIncorecte: false                 \r\n  })\r\n\r\n  const validateField = (e) => {\r\n    if(e.target.name === \"email\"){\r\n      let re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      let emailErr = ! re.test(String(email).toLowerCase());\r\n      \r\n      setEmailError(emailErr);\r\n    }\r\n    else  if(e.target.name === \"password\"){\r\n      let passwordLeng = password.length ;\r\n      setPasswordError(passwordLeng < 8);\r\n      \r\n    }\r\n\r\n  }\r\n\r\n  const submiting = (e) => {\r\n    e.preventDefault();\r\n        setResponse(old =>  { return {...old, sending: true}});\r\n\r\n        if(!emailError && !passwordError){\r\n          let data = {email, password};\r\n\r\n          fetch(`${Config.BACKEND_URL}/patient/auth`,{\r\n              method:\"post\",\r\n              headers: {\r\n                  'Content-Type': 'application/json',\r\n              },\r\n              body:JSON.stringify({...data})\r\n          })\r\n          .then(\r\n              (r) => r.json()\r\n              .then(res => {\r\n                console.log(res)\r\n                  if(!res.error){\r\n                      props.submiting(res);\r\n                      setResponse({sending: false, success:true, donneIncorecte: false});\r\n                  }else {\r\n                      setResponse({sending: false, success:false, donneIncorecte:true})\r\n                      if(res.validator){\r\n  \r\n                      }else{\r\n                        setErrorMessage(res.message)\r\n                      }\r\n                  }\r\n             \r\n              })\r\n              .catch(e =>{ \r\n                console.log(e.response)\r\n                  setResponse({sending: false, success:false, donneIncorecte:true})\r\n                  if(e.response.data.error){\r\n                    setErrorMessage(e.response.data.message)\r\n                  }else {\r\n                    setErrorMessage(\"Une éreur inconue est survenue\")\r\n                  }\r\n              })\r\n              )\r\n              .catch(e =>{ \r\n                console.log(e.response)\r\n                  setResponse({sending: false, success:false, donneIncorecte:true})\r\n                  if(e.response.data.error){\r\n                    setErrorMessage(e.response.data.message)\r\n                  }else {\r\n                    setErrorMessage(\"Une éreur inconue est survenue\")\r\n                  }\r\n              })\r\n        }\r\n        \r\n  }\r\n  return(\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n\r\n      <div className={classes.paper}>\r\n        {/* <Typography component=\"h1\" variant=\"h5\"> {content.new.auth} </Typography> */}\r\n        <form className={classes.form} onSubmit={(e) => submiting(e, {email, password})}>\r\n          <TextField\r\n            value= {email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            error={emailError}\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            variant=\"outlined\"\r\n            onBlur={validateField} \r\n            label={content.new.emailLabel}\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n          <TextField\r\n            margin=\"normal\"\r\n            value={password}\r\n            variant=\"outlined\"\r\n            onChange={ (e) => setPassword(e.target.value)}\r\n            error={passwordError}\r\n            required\r\n            fullWidth\r\n            onBlur={validateField} \r\n            name=\"password\"\r\n            label={content.new.passLabel}\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n           {content.new.signin}\r\n          </Button>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n      <Row className=\"justify-content-center\">\r\n              <Collapse in={response.donneIncorecte} >\r\n                    <div id=\"example-collapse-text\">\r\n                      <Alert variant=\"danger\"> {messageError} </Alert>\r\n                    </div>\r\n                </Collapse>\r\n            </Row>\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}