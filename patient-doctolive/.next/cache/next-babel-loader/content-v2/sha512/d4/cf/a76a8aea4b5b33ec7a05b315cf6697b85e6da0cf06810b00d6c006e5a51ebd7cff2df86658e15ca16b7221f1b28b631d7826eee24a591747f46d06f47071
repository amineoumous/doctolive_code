{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\app\\\\doctolive_code\\\\patient-doctolive\\\\pages\\\\account\\\\documents.js\";\nimport React, { useState, useEffect } from 'react';\nimport Config from './../../EndPoint';\nimport { TiDeleteOutline } from 'react-icons/ti';\nimport { Row, Col, Container, Alert } from 'react-bootstrap';\nimport { useAuth } from './../../context/AuthContext';\nimport ReactFancyBox from './../../components/fancyBox/fancybox/ReactFancyBox';\nimport { useRouter } from 'next/router';\nimport contentFR from './../../contentFR';\nimport contentEN from './../../contentEN';\nimport contentAR from './../../contentAR';\nexport default function Documents() {\n  const router = useRouter();\n  const {\n    locale\n  } = router;\n  const {\n    userData\n  } = useAuth();\n  const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n  const {\n    0: savedPictures,\n    1: setSavedPictures\n  } = useState([]);\n\n  const deleteImageHandle = async file => {\n    let response = await fetch(`${Config.BACKEND_URL}/upload/document`, {\n      method: 'DELETE',\n      body: JSON.stringify({\n        path: file.path,\n        id: file.id\n      }),\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `token ${userData.token}`\n      }\n    });\n    response.json().then(response => {\n      let index = savedPictures.findIndex(fl => fl.id === file.id);\n      setSavedPictures(oldFiles => {\n        let clone = [...oldFiles];\n        clone.splice(index, 1);\n        return clone;\n      });\n    }).catch(error => {});\n  };\n\n  useEffect(async () => {\n    if (!userData.token) return router.push('account/new');\n    const res = await fetch(`${Config.BACKEND_URL}/patient/documents`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `token ${userData.token}`\n      }\n    });\n    const data = await res.json();\n    setSavedPictures(data.documents);\n    return () => {};\n  }, []);\n\n  if (!savedPictures) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\" \", content.documents.aucun, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (!savedPictures.length) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"text-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\" \", content.documents.aucun, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center justify-content-around mt-4 \",\n      children: savedPictures.length > 0 ? /*#__PURE__*/_jsxDEV(Row, {\n        className: \"images-saved\",\n        children: savedPictures.map((file, index) => {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            className: \"mt-5 p-5\",\n            lg: \"4\",\n            md: \"4\",\n            xs: \"6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-saved\",\n              children: [file.type === \"application/pdf\" ? /*#__PURE__*/_jsxDEV(\"a\", {\n                href: Config.BACKEND_URL + file.path,\n                download: file.name,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: [\"  \", /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/image/pdf.png\",\n                  alt: \"...\",\n                  className: \"img-fluid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 143\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(ReactFancyBox, {\n                thumbnail: `${Config.BACKEND_URL}${file.path}`,\n                showCloseBtn: false,\n                image: `${Config.BACKEND_URL}${file.path}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\" \", file.sentTo === \"patient\" ? /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [content.documents.sharedBy, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 65\n                }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\" \", content.documents.sharedBy, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 112\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\" Dr. \", file.medecin.nom + \"  \" + file.medecin.prenom, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 37\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 47\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                onClick: () => deleteImageHandle(file),\n                className: \"delete-button\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(TiDeleteOutline, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 110\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["C:/app/doctolive_code/patient-doctolive/pages/account/documents.js"],"names":["React","useState","useEffect","Config","TiDeleteOutline","Row","Col","Container","Alert","useAuth","ReactFancyBox","useRouter","contentFR","contentEN","contentAR","Documents","router","locale","userData","content","savedPictures","setSavedPictures","deleteImageHandle","file","response","fetch","BACKEND_URL","method","body","JSON","stringify","path","id","headers","token","json","then","index","findIndex","fl","oldFiles","clone","splice","catch","error","push","res","data","documents","aucun","length","map","type","name","sentTo","sharedBy","medecin","nom","prenom"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport Config from './../../EndPoint'\r\n\r\nimport {TiDeleteOutline} from 'react-icons/ti'\r\n\r\nimport {Row, Col, Container, Alert} from 'react-bootstrap'\r\nimport { useAuth } from './../../context/AuthContext';\r\n\r\nimport ReactFancyBox from './../../components/fancyBox/fancybox/ReactFancyBox'\r\n\r\nimport { useRouter } from 'next/router'\r\n\r\n\r\nimport contentFR from './../../contentFR'\r\nimport contentEN from './../../contentEN'\r\nimport contentAR from './../../contentAR'\r\n\r\n\r\nexport default function Documents() {\r\n    const router = useRouter()\r\n\r\n\r\n    const {locale} = router;\r\n    const {userData} = useAuth();\r\n\r\n    const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\r\n\r\n    const [savedPictures, setSavedPictures] = useState([]);\r\n\r\n\r\n\r\n\r\n    const deleteImageHandle = async (file) => {\r\n\r\n        let response = await fetch(`${Config.BACKEND_URL}/upload/document`, {\r\n            method: 'DELETE',\r\n            body: JSON.stringify({path: file.path, id: file.id}),\r\n            headers: {\r\n              'Accept': 'application/json', \r\n              'Content-Type': 'application/json',\r\n              'Authorization': `token ${userData.token}`,\r\n            },\r\n        });\r\n\r\n        response.json()\r\n        .then(response => {\r\n            let index = savedPictures.findIndex(fl => fl.id === file.id);\r\n\r\n            setSavedPictures(oldFiles => {\r\n                let clone = [...oldFiles]\r\n                clone.splice(index, 1);\r\n                return (clone)\r\n            })\r\n        })\r\n        .catch(error => {\r\n\r\n            \r\n        })\r\n    }\r\n\r\n    useEffect( async () => {\r\n        if(!userData.token) return router.push('account/new')\r\n\r\n        const res = await fetch(`${Config.BACKEND_URL}/patient/documents`, {\r\n            headers: {\r\n                'Accept': 'application/json', \r\n                'Content-Type': 'application/json',\r\n                'Authorization': `token ${userData.token}`,\r\n              },\r\n        })\r\n        const data = await res.json()\r\n        setSavedPictures(data.documents)\r\n        return () => {\r\n            \r\n        }\r\n    }, [])\r\n    if(!savedPictures) {\r\n        return (\r\n            <Container>\r\n                <h3> {content.documents.aucun} </h3>\r\n            </Container>\r\n        )\r\n    }\r\n    if(!savedPictures.length) {\r\n        return (\r\n            <Container className='text-center mt-5'>\r\n                <h3> {content.documents.aucun} </h3>\r\n            </Container>\r\n        )\r\n    }\r\n    return (\r\n        <Container>\r\n            <Row className=\"align-items-center justify-content-around mt-4 \">\r\n            {\r\n               savedPictures.length > 0 ?\r\n               \r\n                <Row className=\"images-saved\">\r\n                    {savedPictures.map((file, index) => {\r\n\r\n                        return (\r\n                            <Col className=\"mt-5 p-5\" lg=\"4\" md=\"4\" xs=\"6\" key={index}>\r\n                                <div className=\"image-saved\">\r\n                                    {file.type === \"application/pdf\" ?\r\n                                    <a href={Config.BACKEND_URL + file.path} download={file.name} target=\"_blank\" rel=\"noopener noreferrer\">  <img src='/image/pdf.png' alt=\"...\" className=\"img-fluid\" /> </a>\r\n                                    :\r\n                                    <ReactFancyBox\r\n                                        thumbnail={`${Config.BACKEND_URL}${file.path}`}\r\n                                        showCloseBtn={false}\r\n                                        image={`${Config.BACKEND_URL}${file.path}`}/>\r\n                                    }\r\n                                              <p> {\r\n                                    file.sentTo === \"patient\" ? <label>{content.documents.sharedBy} </label> : <label> {content.documents.sharedBy} </label>\r\n                                    }\r\n                                    <strong> Dr. {file.medecin.nom + \"  \" + file.medecin.prenom} </strong> </p>\r\n                                    <span onClick={() => deleteImageHandle(file)} className=\"delete-button\"> <TiDeleteOutline /> </span>                                            \r\n                                </div>\r\n                            </Col>\r\n                        )\r\n                    })}\r\n                </Row>\r\n                : null\r\n            }\r\n        </Row>\r\n            \r\n        </Container>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}