{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\CARRE\\\\Documents\\\\GitHub\\\\doctolive_code\\\\patient-doctolive\\\\components\\\\InscriptionForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport { Col, Row, Alert, Collapse } from 'react-bootstrap';\nimport Config from './../EndPoint'; // @material-ui/icons\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport { MdVisibility, MdVisibilityOff } from 'react-icons/md'; // import TextField from 'components/Inputs/InputIcone/index';\n\nimport Button from './CustomButtons/Button';\nimport fetch from 'isomorphic-unfetch';\nimport { useRouter } from 'next/router';\nimport contentFR from './../contentFR';\nimport contentEN from './../contentEN';\nimport contentAR from './../contentAR';\nexport default function ElementForm(props) {\n  var _response$message;\n\n  const router = useRouter();\n  const {\n    locale\n  } = router;\n  const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    nom: \"\",\n    prenom: \"\",\n    phone: \"\",\n    email: \"\",\n    password: \"\",\n    email_confirmation: \"\"\n  });\n  const {\n    0: fieldValidationErrors,\n    1: setfieldValidationErrors\n  } = useState({\n    nomError: false,\n    prenomError: false,\n    numeroError: false,\n    emailError: false\n  });\n  const {\n    0: response,\n    1: setResponse\n  } = useState({\n    sending: false,\n    success: false,\n    donneIncorecte: false\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setResponse(old => {\n      return _objectSpread(_objectSpread({}, old), {}, {\n        sending: true\n      });\n    });\n    let data = traitementDonnee();\n    fetch(`${Config.BACKEND_URL}/patient`, {\n      method: \"post\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(_objectSpread({}, data))\n    }).then(r => r.json().then(res => {\n      console.log(res);\n\n      if (!res.error) {\n        props.setUserData(res);\n        setResponse({\n          sending: false,\n          success: true,\n          donneIncorecte: false\n        });\n      } else {\n        if (res.validator) {\n          setResponse({\n            sending: false,\n            success: false,\n            donneIncorecte: false,\n            validator: true,\n            message: res.message\n          });\n        } else {\n          setResponse({\n            sending: false,\n            success: false,\n            donneIncorecte: true\n          });\n        }\n      }\n    })).catch(error => {\n      console.log(error);\n      setResponse({\n        sending: false,\n        success: false,\n        donneIncorecte: true\n      });\n    });\n  };\n\n  const traitementDonnee = () => {\n    let formData = {};\n    formData.nom = state.nom;\n    formData.phone = state.phone;\n    formData.email = state.email;\n    formData.prenom = state.prenom;\n    formData.password = state.password;\n    formData.email_confirmation = state.email_confirmation;\n    return formData;\n  };\n\n  const validateField = () => {};\n\n  const handleChange = ({\n    target: {\n      value,\n      name\n    }\n  }) => {\n    if (name === \"phone\") {\n      value = value // Remove all non-digits, turn initial 33 into nothing\n      .replace(/[^\\d+]/g, '').replace(/^0/, '+212') // Stick to first 10, ignore later digits\n      .slice(0, 13) // Add a space after any 2-digit group followed by more digits\n      .replace(/(\\d{3})(?=\\d)/g, '$1 ');\n    }\n\n    setState(old => {\n      return _objectSpread(_objectSpread({}, old), {}, {\n        [name]: value\n      });\n    });\n  }; // let {password, showPassword, email_confirmation, fieldValidationErrors, nom, prenom, phone, email, donneIncorecte, success} = state\n\n\n  console.log(response);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    autoComplete: \"off\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        md: \"12\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Saisissez vos informations pour continuer.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        md: \"6\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          error: fieldValidationErrors.nomError,\n          placeholder: \"\",\n          label: content.new.labelNom,\n          required: false,\n          variant: \"outlined\",\n          name: \"nom\",\n          onBlur: validateField,\n          value: state.nom,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        md: \"6\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          placeholder: \"\",\n          variant: \"outlined\",\n          required: false,\n          error: fieldValidationErrors.prenomError,\n          label: content.new.labelPrenom,\n          onBlur: validateField,\n          name: \"prenom\",\n          value: state.prenom,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: 12,\n        sm: 12,\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          className: \"phone-text\",\n          value: state.phone,\n          onChange: handleChange,\n          fullWidth: true,\n          variant: \"outlined\",\n          type: \"text\",\n          onBlur: validateField,\n          error: state.phoneError,\n          helperText: state.phoneError ? content.new.phoneError : \"\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"patientPhone\",\n          label: content.new.phoneLabel,\n          name: \"phone\",\n          autoComplete: \"new-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: content.new.emailLabel,\n          placeholder: \"Adresse email\",\n          variant: \"outlined\",\n          name: \"email\",\n          error: fieldValidationErrors.emailError,\n          required: true,\n          onBlur: validateField,\n          value: state.email,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: content.new.labelEmailC,\n          placeholder: content.new.labelEmailCP,\n          variant: \"outlined\",\n          name: \"email_confirmation\",\n          error: fieldValidationErrors.emailError,\n          required: true,\n          onBlur: validateField,\n          value: state.email_confirmation,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"12\",\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          variant: \"outlined\",\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            htmlFor: \"standard-adornment-password\",\n            children: [\" \", content.new.passLabel, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            id: \"standard-adornment-password\",\n            type: state.showPassword ? 'text' : 'password',\n            value: state.password,\n            onChange: handleChange,\n            required: true,\n            label: content.new.passLabel,\n            name: \"password\",\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"toggle password visibility\",\n                onClick: () => setState(old => {\n                  return _objectSpread(_objectSpread({}, old), {}, {\n                    showPassword: !state.showPassword\n                  });\n                }),\n                children: state.showPassword ? /*#__PURE__*/_jsxDEV(MdVisibility, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 63\n                }, this) : /*#__PURE__*/_jsxDEV(MdVisibilityOff, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 82\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Collapse, {\n        in: response.donneIncorecte,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            children: content.new.errorSignup\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Collapse, {\n        in: response.validator,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            children: (_response$message = response.message) === null || _response$message === void 0 ? void 0 : _response$message.map((mess, index) => {\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\" \", mess.msg, \",  \"]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 48\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Collapse, {\n        in: response.success,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"success\",\n            children: content.new.successSignup\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center justify-content-around mt-4 \",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        color: \"primary \",\n        className: \"signup\",\n        children: [\" \", content.new.signup, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 13\n  }, this);\n}","map":{"version":3,"sources":["C:/Users/CARRE/Documents/GitHub/doctolive_code/patient-doctolive/components/InscriptionForm.js"],"names":["React","useState","Col","Row","Alert","Collapse","Config","InputLabel","TextField","FormControl","OutlinedInput","InputAdornment","IconButton","MdVisibility","MdVisibilityOff","Button","fetch","useRouter","contentFR","contentEN","contentAR","ElementForm","props","router","locale","content","state","setState","nom","prenom","phone","email","password","email_confirmation","fieldValidationErrors","setfieldValidationErrors","nomError","prenomError","numeroError","emailError","response","setResponse","sending","success","donneIncorecte","handleSubmit","e","preventDefault","old","data","traitementDonnee","BACKEND_URL","method","headers","body","JSON","stringify","then","r","json","res","console","log","error","setUserData","validator","message","catch","formData","validateField","handleChange","target","value","name","replace","slice","new","labelNom","labelPrenom","phoneError","phoneLabel","emailLabel","labelEmailC","labelEmailCP","passLabel","showPassword","errorSignup","map","mess","index","msg","successSignup","signup"],"mappings":";;;;;;;;;AACA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AAEA,SAASC,GAAT,EAAaC,GAAb,EAAkBC,KAAlB,EAAyBC,QAAzB,QAAyC,iBAAzC;AAEA,OAAOC,MAAP,MAAmB,eAAnB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAGA,OAAOC,SAAP,MAAsB,6BAAtB;AAEA,OAAOC,WAAP,MAAwB,+BAAxB;AAEA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAEA,SAAQC,YAAR,EAAsBC,eAAtB,QAA4C,gBAA5C,C,CAEA;;AACA,OAAOC,MAAP,MAAoB,wBAApB;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,SAAT,QAA0B,aAA1B;AAGA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AAIA,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA2B;AAAA;;AACtC,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAM;AAACO,IAAAA;AAAD,MAAWD,MAAjB;AACA,QAAME,OAAO,GAAGD,MAAM,KAAK,IAAX,GAAkBJ,SAAlB,GAA8BI,MAAM,KAAK,IAAX,GAAkBL,SAAlB,GAA8BD,SAA5E;AAEA,QAAM;AAAA,OAACQ,KAAD;AAAA,OAAQC;AAAR,MAAoB1B,QAAQ,CAAC;AACvB2B,IAAAA,GAAG,EAAE,EADkB;AAEvBC,IAAAA,MAAM,EAAC,EAFgB;AAGvBC,IAAAA,KAAK,EAAC,EAHiB;AAIvBC,IAAAA,KAAK,EAAE,EAJgB;AAKvBC,IAAAA,QAAQ,EAAC,EALc;AAMvBC,IAAAA,kBAAkB,EAAC;AANI,GAAD,CAAlC;AAQA,QAAM;AAAA,OAACC,qBAAD;AAAA,OAAwBC;AAAxB,MAAoDlC,QAAQ,CAAC;AAC/DmC,IAAAA,QAAQ,EAAC,KADsD;AAE/DC,IAAAA,WAAW,EAAC,KAFmD;AAG/DC,IAAAA,WAAW,EAAC,KAHmD;AAI/DC,IAAAA,UAAU,EAAC;AAJoD,GAAD,CAAlE;AAOA,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BxC,QAAQ,CAAC;AACrCyC,IAAAA,OAAO,EAAC,KAD6B;AAErCC,IAAAA,OAAO,EAAC,KAF6B;AAGrCC,IAAAA,cAAc,EAAE;AAHqB,GAAD,CAAxC;;AAMA,QAAMC,YAAY,GAAIC,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACAN,IAAAA,WAAW,CAACO,GAAG,IAAK;AAAE,6CAAWA,GAAX;AAAgBN,QAAAA,OAAO,EAAE;AAAzB;AAA+B,KAA1C,CAAX;AAEA,QAAIO,IAAI,GAAGC,gBAAgB,EAA3B;AAEAlC,IAAAA,KAAK,CAAE,GAAEV,MAAM,CAAC6C,WAAY,UAAvB,EAAiC;AAClCC,MAAAA,MAAM,EAAC,MAD2B;AAElCC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFyB;AAKlCC,MAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,mBAAmBP,IAAnB;AAL6B,KAAjC,CAAL,CAOCQ,IAPD,CAQKC,CAAD,IAAOA,CAAC,CAACC,IAAF,GACNF,IADM,CACDG,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAG,CAACA,GAAG,CAACG,KAAR,EAAc;AACVzC,QAAAA,KAAK,CAAC0C,WAAN,CAAkBJ,GAAlB;AACAnB,QAAAA,WAAW,CAAC;AAACC,UAAAA,OAAO,EAAE,KAAV;AAAiBC,UAAAA,OAAO,EAAC,IAAzB;AAA+BC,UAAAA,cAAc,EAAE;AAA/C,SAAD,CAAX;AAGH,OALD,MAKM;AACF,YAAGgB,GAAG,CAACK,SAAP,EAAiB;AACbxB,UAAAA,WAAW,CAAC;AAACC,YAAAA,OAAO,EAAE,KAAV;AAAiBC,YAAAA,OAAO,EAAC,KAAzB;AAAgCC,YAAAA,cAAc,EAAC,KAA/C;AAAsDqB,YAAAA,SAAS,EAAE,IAAjE;AAAuEC,YAAAA,OAAO,EAAEN,GAAG,CAACM;AAApF,WAAD,CAAX;AACH,SAFD,MAEK;AACDzB,UAAAA,WAAW,CAAC;AAACC,YAAAA,OAAO,EAAE,KAAV;AAAiBC,YAAAA,OAAO,EAAC,KAAzB;AAAgCC,YAAAA,cAAc,EAAC;AAA/C,WAAD,CAAX;AAEH;AACJ;AAEJ,KAjBM,CARX,EA0BMuB,KA1BN,CA0BYJ,KAAK,IAAG;AACZF,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACAtB,MAAAA,WAAW,CAAC;AAACC,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,OAAO,EAAC,KAAzB;AAAgCC,QAAAA,cAAc,EAAC;AAA/C,OAAD,CAAX;AACH,KA7BL;AA8BH,GApCD;;AAsCA,QAAMM,gBAAgB,GAAG,MAAM;AAC3B,QAAIkB,QAAQ,GAAC,EAAb;AAEAA,IAAAA,QAAQ,CAACxC,GAAT,GAAeF,KAAK,CAACE,GAArB;AACAwC,IAAAA,QAAQ,CAACtC,KAAT,GAAgBJ,KAAK,CAACI,KAAtB;AACAsC,IAAAA,QAAQ,CAACrC,KAAT,GAAgBL,KAAK,CAACK,KAAtB;AACAqC,IAAAA,QAAQ,CAACvC,MAAT,GAAiBH,KAAK,CAACG,MAAvB;AACAuC,IAAAA,QAAQ,CAACpC,QAAT,GAAmBN,KAAK,CAACM,QAAzB;AACAoC,IAAAA,QAAQ,CAACnC,kBAAT,GAA6BP,KAAK,CAACO,kBAAnC;AAEA,WAAOmC,QAAP;AACH,GAXD;;AAaA,QAAMC,aAAa,GAAG,MAAM,CAE3B,CAFD;;AAIA,QAAMC,YAAY,GAAG,CAAC;AAACC,IAAAA,MAAM,EAAG;AAACC,MAAAA,KAAD;AAAQC,MAAAA;AAAR;AAAV,GAAD,KAA8B;AAE/C,QAAGA,IAAI,KAAK,OAAZ,EAAoB;AAChBD,MAAAA,KAAK,GAAGA,KAAK,CACb;AADa,OAEZE,OAFO,CAEC,SAFD,EAEY,EAFZ,EAGPA,OAHO,CAGC,IAHD,EAGO,MAHP,EAIR;AAJQ,OAKPC,KALO,CAKD,CALC,EAKE,EALF,EAMR;AANQ,OAOPD,OAPO,CAOC,gBAPD,EAOmB,KAPnB,CAAR;AAQH;;AACD/C,IAAAA,QAAQ,CAACqB,GAAG,IAAI;AAAC,6CAAYA,GAAZ;AAAiB,SAACyB,IAAD,GAAQD;AAAzB;AAAgC,KAAzC,CAAR;AACH,GAbD,CAjFsC,CA+FlC;;;AACDX,EAAAA,OAAO,CAACC,GAAR,CAAYtB,QAAZ;AACH,sBACQ;AAAM,IAAA,QAAQ,EAAEK,YAAhB;AAA8B,IAAA,YAAY,EAAC,KAA3C;AAAA,4BAEI,QAAC,GAAD;AAAA,8BACA,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,EAAE,EAAC,IAAhB;AAAA,+BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cADA,eAIQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,EAAE,EAAC,GAAhB;AAAA,+BACI,QAAC,SAAD;AACI,UAAA,KAAK,EAAEX,qBAAqB,CAACE,QADjC;AAEI,UAAA,WAAW,EAAC,EAFhB;AAGI,UAAA,KAAK,EAAEX,OAAO,CAACmD,GAAR,CAAYC,QAHvB;AAII,UAAA,QAAQ,EAAE,KAJd;AAKI,UAAA,OAAO,EAAC,UALZ;AAMI,UAAA,IAAI,EAAC,KANT;AAOI,UAAA,MAAM,EAAER,aAPZ;AAQI,UAAA,KAAK,EAAE3C,KAAK,CAACE,GARjB;AASI,UAAA,QAAQ,EAAE0C;AATd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAJR,eAkBQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,EAAE,EAAC,GAAhB;AAAA,+BACI,QAAC,SAAD;AACI,UAAA,WAAW,EAAC,EADhB;AAEI,UAAA,OAAO,EAAC,UAFZ;AAGI,UAAA,QAAQ,EAAE,KAHd;AAII,UAAA,KAAK,EAAEpC,qBAAqB,CAACG,WAJjC;AAKI,UAAA,KAAK,EAAEZ,OAAO,CAACmD,GAAR,CAAYE,WALvB;AAMI,UAAA,MAAM,EAAET,aANZ;AAOI,UAAA,IAAI,EAAC,QAPT;AAQI,UAAA,KAAK,EAAE3C,KAAK,CAACG,MARjB;AASI,UAAA,QAAQ,EAAEyC;AATd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAlBR,eAiCQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAa,QAAA,EAAE,EAAE,EAAjB;AAAqB,QAAA,SAAS,EAAC,MAA/B;AAAA,+BACI,QAAC,SAAD;AACI,UAAA,SAAS,EAAC,YADd;AAEI,UAAA,KAAK,EAAE5C,KAAK,CAACI,KAFjB;AAGI,UAAA,QAAQ,EAAEwC,YAHd;AAII,UAAA,SAAS,MAJb;AAKI,UAAA,OAAO,EAAC,UALZ;AAMI,UAAA,IAAI,EAAC,MANT;AAOI,UAAA,MAAM,EAAED,aAPZ;AAQI,UAAA,KAAK,EAAE3C,KAAK,CAACqD,UARjB;AASI,UAAA,UAAU,EAAErD,KAAK,CAACqD,UAAN,GAAmBtD,OAAO,CAACmD,GAAR,CAAYG,UAA/B,GAA4C,EAT5D;AAUI,UAAA,MAAM,EAAC,QAVX;AAWI,UAAA,QAAQ,MAXZ;AAYI,UAAA,SAAS,MAZb;AAaI,UAAA,EAAE,EAAC,cAbP;AAcI,UAAA,KAAK,EAAEtD,OAAO,CAACmD,GAAR,CAAYI,UAdvB;AAeI,UAAA,IAAI,EAAC,OAfT;AAgBI,UAAA,YAAY,EAAC;AAhBjB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAjCR,eAsDQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,SAAS,EAAC,MAAvB;AAAA,+BACI,QAAC,SAAD;AACI,UAAA,SAAS,MADb;AAEI,UAAA,KAAK,EAAEvD,OAAO,CAACmD,GAAR,CAAYK,UAFvB;AAGI,UAAA,WAAW,EAAC,eAHhB;AAII,UAAA,OAAO,EAAC,UAJZ;AAKI,UAAA,IAAI,EAAC,OALT;AAMI,UAAA,KAAK,EAAE/C,qBAAqB,CAACK,UANjC;AAOI,UAAA,QAAQ,EAAE,IAPd;AAQI,UAAA,MAAM,EAAE8B,aARZ;AASI,UAAA,KAAK,EAAE3C,KAAK,CAACK,KATjB;AAUI,UAAA,QAAQ,EAAEuC;AAVd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAtDR,eAqEQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,SAAS,EAAC,MAAvB;AAAA,+BACI,QAAC,SAAD;AACI,UAAA,SAAS,MADb;AAEI,UAAA,KAAK,EAAE7C,OAAO,CAACmD,GAAR,CAAYM,WAFvB;AAGI,UAAA,WAAW,EAAEzD,OAAO,CAACmD,GAAR,CAAYO,YAH7B;AAII,UAAA,OAAO,EAAC,UAJZ;AAKI,UAAA,IAAI,EAAC,oBALT;AAMI,UAAA,KAAK,EAAEjD,qBAAqB,CAACK,UANjC;AAOI,UAAA,QAAQ,EAAE,IAPd;AAQI,UAAA,MAAM,EAAE8B,aARZ;AASI,UAAA,KAAK,EAAE3C,KAAK,CAACO,kBATjB;AAUI,UAAA,QAAQ,EAAEqC;AAVd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cArER,eAmFQ,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,IAAR;AAAa,QAAA,SAAS,EAAC,MAAvB;AAAA,+BACI,QAAC,WAAD;AAAa,UAAA,SAAS,MAAtB;AAAuB,UAAA,OAAO,EAAC,UAA/B;AAAA,kCACI,QAAC,UAAD;AAAY,YAAA,OAAO,EAAC,6BAApB;AAAA,4BAAoD7C,OAAO,CAACmD,GAAR,CAAYQ,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,aAAD;AACI,YAAA,EAAE,EAAC,6BADP;AAEI,YAAA,IAAI,EAAE1D,KAAK,CAAC2D,YAAN,GAAqB,MAArB,GAA8B,UAFxC;AAGI,YAAA,KAAK,EAAE3D,KAAK,CAACM,QAHjB;AAII,YAAA,QAAQ,EAAEsC,YAJd;AAKI,YAAA,QAAQ,EAAE,IALd;AAMI,YAAA,KAAK,EAAE7C,OAAO,CAACmD,GAAR,CAAYQ,SANvB;AAOI,YAAA,IAAI,EAAC,UAPT;AAQI,YAAA,YAAY,eACZ,QAAC,cAAD;AAAgB,cAAA,QAAQ,EAAC,KAAzB;AAAA,qCACI,QAAC,UAAD;AACI,8BAAW,4BADf;AAEI,gBAAA,OAAO,EAAG,MAAMzD,QAAQ,CAACqB,GAAG,IAAG;AAAC,yDAAYA,GAAZ;AAAiBqC,oBAAAA,YAAY,EAAE,CAAC3D,KAAK,CAAC2D;AAAtC;AAAoD,iBAA5D,CAF5B;AAAA,0BAIC3D,KAAK,CAAC2D,YAAN,gBAAqB,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,wBAArB,gBAAwC,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAJzC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAnFR;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA8GI,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,6BACI,QAAC,QAAD;AAAU,QAAA,EAAE,EAAE7C,QAAQ,CAACI,cAAvB;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACI,QAAC,KAAD;AAAQ,YAAA,OAAO,EAAC,QAAhB;AAAA,sBACKnB,OAAO,CAACmD,GAAR,CAAYU;AADjB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA9GJ,eAuHI,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,6BACI,QAAC,QAAD;AAAU,QAAA,EAAE,EAAE9C,QAAQ,CAACyB,SAAvB;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACI,QAAC,KAAD;AAAQ,YAAA,OAAO,EAAC,QAAhB;AAAA,2CAEQzB,QAAQ,CAAC0B,OAFjB,sDAEQ,kBAAkBqB,GAAlB,CAAsB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACnC,kCAAO;AAAA,gCAAqBD,IAAI,CAACE,GAA1B;AAAA,iBAAYD,KAAZ;AAAA;AAAA;AAAA;AAAA,sBAAP;AACH,aAFD;AAFR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAvHJ,eAqII,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,6BACI,QAAC,QAAD;AAAU,QAAA,EAAE,EAAEjD,QAAQ,CAACG,OAAvB;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACI,QAAC,KAAD;AAAQ,YAAA,OAAO,EAAC,SAAhB;AAAA,sBACKlB,OAAO,CAACmD,GAAR,CAAYe;AADjB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YArIJ,eA8II,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA,6BACI,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,KAAK,EAAC,UAA5B;AAAuC,QAAA,SAAS,EAAC,QAAjD;AAAA,wBAA4DlE,OAAO,CAACmD,GAAR,CAAYgB,MAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA9IJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADR;AAqJH","sourcesContent":["\r\nimport React, {useState} from \"react\";\r\n\r\nimport { Col,Row, Alert, Collapse } from 'react-bootstrap';\r\n\r\nimport Config from './../EndPoint'\r\n// @material-ui/icons\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport {MdVisibility, MdVisibilityOff} from 'react-icons/md'\r\n\r\n// import TextField from 'components/Inputs/InputIcone/index';\r\nimport Button  from './CustomButtons/Button';\r\n\r\nimport fetch from 'isomorphic-unfetch';\r\nimport { useRouter } from 'next/router'\r\n\r\n\r\nimport contentFR from './../contentFR'\r\nimport contentEN from './../contentEN'\r\nimport contentAR from './../contentAR'\r\n\r\n\r\n\r\nexport default function ElementForm(props){\r\n    const router = useRouter();\r\n    const {locale} = router;\r\n    const content = locale === \"ar\" ? contentAR : locale === \"en\" ? contentEN : contentFR;\r\n\r\n    const [state, setState] = useState({\r\n                nom: \"\",\r\n                prenom:\"\",\r\n                phone:\"\",\r\n                email: \"\",\r\n                password:\"\",\r\n                email_confirmation:\"\",\r\n    });\r\n    const [fieldValidationErrors, setfieldValidationErrors] = useState({\r\n        nomError:false,\r\n        prenomError:false,\r\n        numeroError:false,\r\n        emailError:false,\r\n                    \r\n    })\r\n    const [response, setResponse] = useState({\r\n        sending:false,\r\n        success:false,   \r\n        donneIncorecte: false                 \r\n    })\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setResponse(old =>  { return {...old, sending: true}});\r\n\r\n        let data = traitementDonnee();\r\n\r\n        fetch(`${Config.BACKEND_URL}/patient`,{\r\n            method:\"post\",\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body:JSON.stringify({...data})\r\n        })\r\n        .then(\r\n            (r) => r.json()\r\n            .then(res => {\r\n                console.log(res)\r\n                if(!res.error){\r\n                    props.setUserData(res);\r\n                    setResponse({sending: false, success:true, donneIncorecte: false});\r\n                    \r\n                    \r\n                }else {\r\n                    if(res.validator){\r\n                        setResponse({sending: false, success:false, donneIncorecte:false, validator: true, message: res.message})\r\n                    }else{\r\n                        setResponse({sending: false, success:false, donneIncorecte:true})\r\n\r\n                    }\r\n                }\r\n           \r\n            })\r\n            ).catch(error =>{ \r\n                console.log(error)\r\n                setResponse({sending: false, success:false, donneIncorecte:true})\r\n            })\r\n    }\r\n\r\n    const traitementDonnee = () => {\r\n        let formData={};\r\n        \r\n        formData.nom=  state.nom\r\n        formData.phone= state.phone\r\n        formData.email= state.email\r\n        formData.prenom= state.prenom\r\n        formData.password= state.password\r\n        formData.email_confirmation= state.email_confirmation\r\n \r\n        return formData;\r\n    }\r\n \r\n    const validateField = () => {\r\n\r\n    }\r\n\r\n    const handleChange = ({target : {value, name}}) => {\r\n        \r\n        if(name === \"phone\"){\r\n            value = value\r\n            // Remove all non-digits, turn initial 33 into nothing\r\n            .replace(/[^\\d+]/g, '')\r\n            .replace(/^0/, '+212')\r\n            // Stick to first 10, ignore later digits\r\n            .slice(0, 13)\r\n            // Add a space after any 2-digit group followed by more digits\r\n            .replace(/(\\d{3})(?=\\d)/g, '$1 ')\r\n        }\r\n        setState(old => {return { ...old, [name]: value}}) ;\r\n    }\r\n        // let {password, showPassword, email_confirmation, fieldValidationErrors, nom, prenom, phone, email, donneIncorecte, success} = state\r\n       console.log(response)\r\n    return (\r\n            <form onSubmit={handleSubmit} autoComplete=\"off\">\r\n            \r\n                <Row>\r\n                <Col xs=\"12\" md=\"12\"> \r\n                <h3>Saisissez vos informations pour continuer.</h3>\r\n                </Col>\r\n                        <Col xs=\"12\" md=\"6\"> \r\n                            <TextField\r\n                                error={fieldValidationErrors.nomError}\r\n                                placeholder=\"\"\r\n                                label={content.new.labelNom}\r\n                                required={false}\r\n                                variant=\"outlined\"\r\n                                name=\"nom\"\r\n                                onBlur={validateField} \r\n                                value={state.nom}\r\n                                onChange={handleChange} \r\n                            />\r\n                             \r\n                        </Col>\r\n                        <Col xs=\"12\" md=\"6\" > \r\n                            <TextField\r\n                                placeholder=\"\"\r\n                                variant=\"outlined\"\r\n                                required={false}\r\n                                error={fieldValidationErrors.prenomError}\r\n                                label={content.new.labelPrenom}\r\n                                onBlur={validateField} \r\n                                name=\"prenom\"\r\n                                value={state.prenom}\r\n                                onChange={handleChange} \r\n                            />\r\n                          \r\n                        </Col>\r\n\r\n                        <Col xs={12} sm={12} className=\"mt-3\">\r\n                            <TextField\r\n                                className=\"phone-text\"\r\n                                value={state.phone}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                type=\"text\"\r\n                                onBlur={validateField} \r\n                                error={state.phoneError}\r\n                                helperText={state.phoneError ? content.new.phoneError : \"\"}\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"patientPhone\"\r\n                                label={content.new.phoneLabel}\r\n                                name=\"phone\"\r\n                                autoComplete=\"new-password\"\r\n                            />\r\n                        </Col>\r\n\r\n                        <Col xs=\"12\" className=\"mt-3\">\r\n                            <TextField \r\n                                fullWidth\r\n                                label={content.new.emailLabel}\r\n                                placeholder=\"Adresse email\"\r\n                                variant=\"outlined\"\r\n                                name=\"email\"\r\n                                error={fieldValidationErrors.emailError}\r\n                                required={true}\r\n                                onBlur={validateField} \r\n                                value={state.email}\r\n                                onChange={handleChange} \r\n                            />   \r\n                           \r\n                        </Col> \r\n                        <Col xs=\"12\" className=\"mt-3\">\r\n                            <TextField \r\n                                fullWidth\r\n                                label={content.new.labelEmailC}\r\n                                placeholder={content.new.labelEmailCP}\r\n                                variant=\"outlined\"\r\n                                name=\"email_confirmation\"\r\n                                error={fieldValidationErrors.emailError}\r\n                                required={true}\r\n                                onBlur={validateField} \r\n                                value={state.email_confirmation}\r\n                                onChange={handleChange} \r\n                            />\r\n                        </Col> \r\n                        <Col xs=\"12\" className=\"mt-3\"> \r\n                            <FormControl fullWidth variant=\"outlined\">\r\n                                <InputLabel htmlFor=\"standard-adornment-password\"> {content.new.passLabel} </InputLabel>\r\n                                <OutlinedInput\r\n                                    id=\"standard-adornment-password\"\r\n                                    type={state.showPassword ? 'text' : 'password'}\r\n                                    value={state.password}\r\n                                    onChange={handleChange}\r\n                                    required={true}\r\n                                    label={content.new.passLabel}\r\n                                    name=\"password\"\r\n                                    endAdornment={\r\n                                    <InputAdornment position=\"end\">\r\n                                        <IconButton\r\n                                            aria-label=\"toggle password visibility\"\r\n                                            onClick={ () => setState(old =>{return  {...old, showPassword: !state.showPassword}})} \r\n                                        >\r\n                                        {state.showPassword ? <MdVisibility /> : <MdVisibilityOff />}\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                    }\r\n                                />\r\n                                </FormControl>\r\n                        </Col>\r\n                </Row>\r\n                <Row className=\"justify-content-center\">\r\n                    <Collapse in={response.donneIncorecte}>\r\n                        <div className=\"mt-5\">\r\n                            <Alert  variant=\"danger\">\r\n                                {content.new.errorSignup}\r\n                            </Alert>\r\n                        </div>\r\n                    </Collapse>\r\n                </Row>\r\n                <Row className=\"justify-content-center\">\r\n                    <Collapse in={response.validator}>\r\n                        <div className=\"mt-5\">\r\n                            <Alert  variant=\"danger\">\r\n                                {\r\n                                    response.message?.map((mess, index) => {\r\n                                        return(<span key= {index}> {mess.msg},  </span>)\r\n                                    })\r\n                                }\r\n                                {/* {content.new.errorSignup} */}\r\n                            </Alert>\r\n                        </div>\r\n                    </Collapse>\r\n                </Row>\r\n                <Row className=\"justify-content-center\">\r\n                    <Collapse in={response.success}>\r\n                        <div className=\"mt-5\">\r\n                            <Alert  variant=\"success\">\r\n                                {content.new.successSignup}\r\n                            </Alert>\r\n                        </div>\r\n                    </Collapse>\r\n                </Row>\r\n                <Row className=\"align-items-center justify-content-around mt-4 \">\r\n                    <Button type=\"submit\" color=\"primary \" className=\"signup\"> {content.new.signup} </Button>\r\n                </Row>\r\n            </form>\r\n    );\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}